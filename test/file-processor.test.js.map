{
  "version": 3,
  "file": "file-processor.test.js",
  "sourceRoot": "..\\",
  "sources": [
    "test\\file-processor.test.coffee"
  ],
  "names": [],
  "mappings": "AAA4B;AAAA,IAAA,QAAA,EAAA,MAAA,EAAA,OAAA,EAAA,MAAA,EAAA;;AAE5B,OAAA;EAAQ,KAAR;EAAe,QAAf;EAAyB,MAAzB;EAAiC,EAAjC;CAAA,MAAA;;AACA,OAAA;EAAQ,mBAAR;EAA6B,KAA7B;CAAA,MAAA;;AACA,OAAA;EAAQ,QAAR;CAAA,MAAA;;AACA,OAAA;EAAQ,OAAR;CAAA,MAAA;;AACA,OAAA;EAAQ,aAAR;CAAA,MAAA;;AAEA,OAAO,CAAA,OAAP,MAAA;;AACA,MAAM,CAAC,MAAP,CAAc,MAAd,EAAsB,GAAtB;;AACA,OAAO,CAAA,QAAP,MAAA;;AACA,MAAM,CAAC,MAAP,CAAc,MAAd,EAAsB,IAAtB,EAX4B;;;AAe5B,mBAAA,CAAoB,+BAApB;;AACA,mBAAA,CAAoB,gCAApB;;AAEA,QAAA,GAAW;EACV,IAAA,EAAM;AADI;;AAIX,OAAA,GAAU,SAAA,CAAU,mCAAV,EAA+C,IAA/C,EAAqD,KAArD,EAA4D,QAA5D;;AACV,KAAA,CAAM,OAAN,EAAe,CAAf;;AAEA,MAAA,GAAS,SAAA,CAAU,kCAAV,EAA8C,OAA9C,EAAuD,KAAvD,EAA8D,QAA9D;;AACT,KAAA,CAAM,MAAN,EAAc,CAAd;;AAEA,MAAA,GAAS,SAAA,CAAU,kCAAV,EAA8C,CAAC,eAAD,EAAkB,IAAlB,CAA9C,EAAuE,KAAvE,EAA8E,QAA9E;;AACT,KAAA,CAAM,MAAN,EAAc,CAAd;;AAEA,OAAA,GAAU,SAAA,CAAU,mCAAV,EAA+C,QAA/C,EAAyD,KAAzD,EAAgE,QAAhE;;AACV,KAAA,CAAM,MAAN,EAAc,CAAd,EAhC4B;;;;AAqC5B,QAAA,CAAS,CAAA,CAAA,GAAA;SAAM,IAAA,CAAK,OAAL;AAAN,CAAT;;AACA,KAAA,CAAM,CAAA,CAAA,GAAA;SAAM,IAAA,CAAK,WAAL;AAAN,CAAN;;AACA,OAAA,CAAQ,IAAA,CAAK,OAAL,CAAa,CAAC,IAAtB,EAA4B,CAAA;;MAAA,CAA5B;;AAMA,OAAA,CAAQ,IAAA,CAAK,OAAL,EAAc;EAAC,OAAA,EAAS;AAAV,CAAd,CAA8B,CAAC,IAAvC,EAA6C,CAAA;;;MAAA,CAA7C;;AAOA,OAAA,CAAQ,IAAA,CAAK,OAAL,EAAc;EAAC,OAAA,EAAS;AAAV,CAAd,CAA+B,CAAC,IAAxC,EAA8C,CAAA;;;MAAA,CAA9C,EApD4B;;;;;;;AAiE5B,CAAC,CAAA,CAAA,GAAA;AACD,MAAA,MAAA,EAAA,GAAA,EAAA,IAAA,EAAA,QAAA,EAAA,EAAA,EAAA,WAAA,EAAA;EAAC,CAAA,GAAI,IAAI,UAAJ,CAAA;EACJ,CAAC,CAAC,cAAF,GAAmB,CAAC,GAAD,CAAA,GAAA;IAClB,MAAA,CAAO,QAAA,CAAS,GAAT,CAAP,EAAsB,CAAA,cAAA,CAAA,CAAiB,EAAA,CAAG,GAAH,CAAjB,CAAA,CAAtB;AACA,WAAO,eAAA,CAAgB,GAAhB;EAFW;EAInB,GAAA,GAAM;EAEN,CAAC,CAAC,KAAF,CAAQ,CAAA;;;;;;;;;;kBAAA,CAAR,EAYM,CAAA;;oBAAA,CAAA,CAGiB,GAHjB,CAAA;kBAAA,CAZN;EAmBA,CAAC,CAAC,KAAF,CAAQ,CAAA;;;;;;;;;;;kBAAA,CAAR,EAaM,CAAA;;oBAAA,CAAA,CAGiB,GAHjB,CAAA,sBAAA,CAbN,EA1BD;;EA+CC,QAAA,GAAW;EACX,IAAA,GAAO,KAAA,CAAM,QAAN;EAEP,MAAA,CAAO,QAAA,CAAS,IAAT,CAAP;EAEA,MAAA,GAAS,IAAI,aAAJ,CAAA;EACT,MAAM,CAAC,QAAP,CAAgB,QAAhB,EAA0B,IAA1B;EAEA,WAAA,GAAc,eAAA,CAAgB,IAAhB;EAEd,MAAM,CAAC,QAAP,CAAgB,cAAhB,EAAgC,WAAhC;EACA,EAAA,GAAK,IAAA,CAAK,WAAL,CAAiB,CAAC;EACvB,MAAM,CAAC,QAAP,CAAgB,YAAhB,EAA8B,EAA9B;SAEA,KAAA,CAAM,MAAM,CAAC,QAAP,CAAgB,YAAhB,CAAN,EAAqC,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;4CAAA,CAArC;AA9DA,CAAD,CAAA,CAAA",
  "sourcesContent": [
    "# file-processor.test.coffee\r\n\r\nimport {undef, isString, assert, OL} from '@jdeighan/llutils'\r\nimport {deleteFilesMatching, slurp} from '@jdeighan/llutils/fs'\r\nimport {indented} from '@jdeighan/llutils/indent'\r\nimport {peggify} from '@jdeighan/llutils/peggy'\r\nimport {TextBlockList} from '@jdeighan/llutils/text-block'\r\n\r\nimport * as lib from '@jdeighan/llutils/file-processor'\r\nObject.assign(global, lib)\r\nimport * as lib2 from '@jdeighan/llutils/utest'\r\nObject.assign(global, lib2)\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\ndeleteFilesMatching \"./test/file-processor/**/*.js\"\r\ndeleteFilesMatching \"./test/file-processor/**/*.map\"\r\n\r\nhOptions = {\r\n\techo: false\r\n\t}\r\n\r\nnCoffee = procFiles \"./test/file-processor/**/*.coffee\", brew, '.js', hOptions\r\nequal nCoffee, 3\r\n\r\nnPeggy = procFiles \"./test/file-processor/**/*.peggy\", peggify, '.js', hOptions\r\nequal nPeggy, 1\r\n\r\nnCielo = procFiles \"./test/file-processor/**/*.cielo\", [cieloPreProcess, brew], '.js', hOptions\r\nequal nCielo, 1\r\n\r\nnSvelte = procFiles \"./test/file-processor/**/*.svelte\", sveltify, '.js', hOptions\r\nequal nCielo, 1\r\n\r\n# ---------------------------------------------------------------------------\r\n#symbol \"brew(code)\"\r\n\r\nsucceeds () => brew('v = 5')\r\nfails () => brew('let v = 5')\r\nmatches brew('v = 5').code, \"\"\"\r\n\tvar v;\r\n\r\n\tv = 5;\r\n\t\"\"\"\r\n\r\nmatches brew('v = 5', {shebang: true}).code, \"\"\"\r\n\t#!/usr/bin/env node\r\n\tvar v;\r\n\r\n\tv = 5;\r\n\t\"\"\"\r\n\r\nmatches brew('v = 5', {shebang: 'abc'}).code, \"\"\"\r\n\tabc\r\n\tvar v;\r\n\r\n\tv = 5;\r\n\t\"\"\"\r\n\r\n# ---------------------------------------------------------------------------\r\n#    - Handles HEREDOC syntax\r\n#    - ends file upon seeing '__END__'\r\n# ---------------------------------------------------------------------------\r\n#symbol \"cieloPreProcess(code)\"\r\n\r\n(() =>\r\n\tt = new UnitTester()\r\n\tt.transformValue = (str) =>\r\n\t\tassert isString(str), \"Not a string: #{OL(str)}\"\r\n\t\treturn cieloPreProcess(str)\r\n\r\n\tbsl = \"\\\\\"\r\n\r\n\tt.equal \"\"\"\r\n\t\timport {undef} from '@jdeighan/llutils'\r\n\r\n\t\tequal fromTAML(<<<), <<<\r\n\t\t\ta: 1\r\n\t\t\tb: 2\r\n\r\n\t\t\t---\r\n\t\t\ta: 1\r\n\t\t\tb: 2\r\n\r\n\t\tconsole.log 'DONE'\r\n\t\t\"\"\", \"\"\"\r\n\t\timport {undef} from '@jdeighan/llutils'\r\n\r\n\t\tequal fromTAML(\"a: 1#{bsl}nb: 2\"), {\"a\":1,\"b\":2}\r\n\t\tconsole.log 'DONE'\r\n\t\t\"\"\"\r\n\r\n\tt.equal \"\"\"\r\n\t\timport {undef} from '@jdeighan/llutils'\r\n\r\n\t\tequal fromTAML(<<<), <<<\r\n\t\t\ta: 1\r\n\t\t\tb: 2\r\n\r\n\t\t\t---\r\n\t\t\ta: 1\r\n\t\t\tb: 2\r\n\r\n\t\t__END__\r\n\t\tconsole.log 'DONE'\r\n\t\t\"\"\", \"\"\"\r\n\t\timport {undef} from '@jdeighan/llutils'\r\n\r\n\t\tequal fromTAML(\"a: 1#{bsl}nb: 2\"), {\"a\":1,\"b\":2}\r\n\t\t\"\"\"\r\n\r\n\t# ---------------------------------------------------------------------------\r\n\r\n\tfilePath = \"test/file-processor/test.cielo\"\r\n\tcode = slurp filePath\r\n\r\n\ttruthy isString(code)\r\n\r\n\tblocks = new TextBlockList()\r\n\tblocks.addBlock filePath, code\r\n\r\n\tpreprocCode = cieloPreProcess code\r\n\r\n\tblocks.addBlock 'PreProcessed', preprocCode\r\n\tjs = brew(preprocCode).code\r\n\tblocks.addBlock 'JavaScript', js\r\n\r\n\tequal blocks.asString('format=box'), '''\r\n\t\t┌────  test/file-processor/test.cielo  ────┐\r\n\t\t│ import {undef} from '@jdeighan/llutils'  │\r\n\t\t│                                          │\r\n\t\t│ hAST = <<<                               │\r\n\t\t│    ---                                   │\r\n\t\t│    type: program                         │\r\n\t\t│    name: John                            │\r\n\t\t│                                          │\r\n\t\t│ equal extract(hAST, \"\"\"                  │\r\n\t\t│    type=\"program\"                        │\r\n\t\t│    \"\"\"), {name: 'John'}                  │\r\n\t\t│                                          │\r\n\t\t│ __END__                                  │\r\n\t\t│                                          │\r\n\t\t│ any old garbage can be here              │\r\n\t\t│                                          │\r\n\t\t├─────────────  PreProcessed  ─────────────┤\r\n\t\t│ import {undef} from '@jdeighan/llutils'  │\r\n\t\t│                                          │\r\n\t\t│ hAST = {\"type\":\"program\",\"name\":\"John\"}  │\r\n\t\t│ equal extract(hAST, \"\"\"                  │\r\n\t\t│    type=\"program\"                        │\r\n\t\t│    \"\"\"), {name: 'John'}                  │\r\n\t\t│                                          │\r\n\t\t├──────────────  JavaScript  ──────────────┤\r\n\t\t│ var hAST;                                │\r\n\t\t│                                          │\r\n\t\t│ import {                                 │\r\n\t\t│   undef                                  │\r\n\t\t│ } from '@jdeighan/llutils';              │\r\n\t\t│                                          │\r\n\t\t│ hAST = {                                 │\r\n\t\t│   \"type\": \"program\",                     │\r\n\t\t│   \"name\": \"John\"                         │\r\n\t\t│ };                                       │\r\n\t\t│                                          │\r\n\t\t│ equal(extract(hAST, `type=\"program\"`), { │\r\n\t\t│   name: 'John'                           │\r\n\t\t│ });                                      │\r\n\t\t│                                          │\r\n\t\t└──────────────────────────────────────────┘\r\n\t\t'''\r\n\r\n\t)()\r\n"
  ]
}