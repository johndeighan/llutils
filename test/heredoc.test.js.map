{
  "version": 3,
  "file": "heredoc.test.js",
  "sourceRoot": "..\\",
  "sources": [
    "test\\heredoc.test.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "# heredoc.test.coffee\n\nimport {\n\tundef, defined, notdefined, nonEmpty,\n\tisString, OL, CWS, behead, blockToArray,\n\tassert, croak,\n\t} from '@jdeighan/llutils'\nimport {undented} from '@jdeighan/llutils/indent'\nimport * as lib from '@jdeighan/llutils/heredoc'\nObject.assign(global, lib)\nimport * as lib2 from '@jdeighan/llutils/utest'\nObject.assign(global, lib2)\n\n# ---------------------------------------------------------------------------\n#symbol \"lineToParts(line)\"\n\nequal lineToParts('this is not a heredoc'), [\n\t'this is not a heredoc'\n\t]\n\nequal lineToParts('this <<< is <<< heredoc'), [\n\t'this '\n\t'<<<'\n\t' is '\n\t'<<<'\n\t' heredoc'\n\t]\n\nequal lineToParts('<<< is <<< heredoc'), [\n\t''\n\t'<<<'\n\t' is '\n\t'<<<'\n\t' heredoc'\n\t]\n\nequal lineToParts('this <<< is <<<'), [\n\t'this '\n\t'<<<'\n\t' is '\n\t'<<<'\n\t''\n\t]\n\nequal lineToParts('<<< is <<<'), [\n\t''\n\t'<<<'\n\t' is '\n\t'<<<'\n\t''\n\t]\n\nequal lineToParts('<<<'), [\n\t''\n\t'<<<'\n\t''\n\t]\n\nequal lineToParts('<<<<<<'), [\n\t''\n\t'<<<'\n\t''\n\t'<<<'\n\t''\n\t]\n\n# ---------------------------------------------------------------------------\n#symbol \"mapHereDoc()\"\n\nequal mapHereDoc(\"\"\"\n\t\tabc\n\t\tdef\n\t\t\"\"\"),\n\t\t'\"abc\\\\ndef\"'\n\n# ---------------------------------------------------------------------------\n\nequal mapHereDoc(\"\"\"\n\t\t===\n\t\tabc\n\t\tdef\n\t\t\"\"\"),\n\t\t'\"abc\\\\ndef\"'\n\n# ---------------------------------------------------------------------------\n\nequal mapHereDoc(\"\"\"\n\t\t...\n\t\tabc\n\t\tdef\n\t\t\"\"\"),\n\t\t'\"abc def\"'\n\n# ---------------------------------------------------------------------------\n\nequal mapHereDoc(\"\"\"\n\t\t---\n\t\ta: 1\n\t\tb: 2\n\t\t\"\"\"),\n\t\t'{\"a\":1,\"b\":2}'\n\n# ---------------------------------------------------------------------------\n\nequal mapHereDoc(\"\"\"\n\t\t---\n\t\t- a\n\t\t- b\n\t\t\"\"\"),\n\t\t'[\"a\",\"b\"]'\n\n# ---------------------------------------------------------------------------\n\n(() =>\n\n\tu = new UnitTester()\n\tu.transformValue = (block) -> return mapHereDoc(block)\n\n\t# ------------------------------------------------------------------------\n\t# Default heredoc type is a block\n\n\tu.equal \"\"\"\n\t\t\tthis is a\n\t\t\tblock of text\n\t\t\t\"\"\",\n\t\t\t'\"this is a\\\\nblock of text\"'\n\n\t# ------------------------------------------------------------------------\n\t# Make explicit that the heredoc type is a block\n\n\tu.equal \"\"\"\n\t\t\t===\n\t\t\tthis is a\n\t\t\tblock of text\n\t\t\t\"\"\",\n\t\t\t'\"this is a\\\\nblock of text\"'\n\n\t# ------------------------------------------------------------------------\n\t# One Line block\n\n\tu.equal \"\"\"\n\t\t\t...this is a\n\t\t\tline of text\n\t\t\t\"\"\",\n\t\t\t'\"this is a line of text\"'\n\n\t# ------------------------------------------------------------------------\n\t# One Line block\n\n\tu.equal \"\"\"\n\t\t\t...\n\t\t\tthis is a\n\t\t\tline of text\n\t\t\t\"\"\",\n\t\t\t'\"this is a line of text\"'\n\n\t# ---------------------------------------------------------------------------\n\t#symbol \"MatrixHereDoc - custom heredoc\"\n\n\tclass MatrixHereDoc extends BaseHereDoc\n\n\t\tmap: (block) ->\n\t\t\t# --- if block starts with a digit\n\t\t\tif notdefined(block.match(/^\\s*\\d/s))\n\t\t\t\treturn undef\n\t\t\tlArray = for line in blockToArray(block)\n\t\t\t\tline.split(/\\s+/).map((str) => parseInt(str))\n\t\t\treturn JSON.stringify(lArray)\n\n\taddHereDocType 'matrix', new MatrixHereDoc()\n\n\tu.equal \"\"\"\n\t\t\t1 2 3\n\t\t\t2 4 6\n\t\t\t\"\"\",\n\t\t\t'[[1,2,3],[2,4,6]]'\n\n\t# ------------------------------------------------------------------------\n\t#symbol \"UCHereDoc = custom heredoc\"\n\n\tclass UCHereDoc extends BaseHereDoc\n\n\t\tmap: (block) ->\n\n\t\t\tif (block.indexOf('^^^') != 0)\n\t\t\t\treturn undef\n\n\t\t\tblock = block.substring(4).toUpperCase()\n\t\t\treturn JSON.stringify(block)\n\n\taddHereDocType 'upper case', new UCHereDoc()\n\n\tu.equal \"\"\"\n\t\t\t^^^\n\t\t\tThis is a\n\t\t\tblock of text\n\t\t\t\"\"\",\n\t\t\t'\"THIS IS A\\\\nBLOCK OF TEXT\"'\n\n\t# ---------------------------------------------------------------------------\n\t#symbol \"UCHereDoc1 - custom heredoc\"\n\n\t#\n\t#     e.g. with header line ***,\n\t#     we'll create an upper-cased single line string\n\n\tclass UCHereDoc2 extends BaseHereDoc\n\n\t\tmap: (block) ->\n\n\t\t\t[head, rest] = behead(block)\n\t\t\tif (head != '***')\n\t\t\t\treturn undef\n\t\t\tblock = CWS(rest.toUpperCase())\n\t\t\tresult = JSON.stringify(block)\n\t\t\treturn result\n\n\taddHereDocType 'upper case 2', new UCHereDoc2()\n\n\t# ---------------------------------------------------------------------------\n\n\tu.equal \"\"\"\n\t\t\t***\n\t\t\tselect ID,Name\n\t\t\tfrom Users\n\t\t\t\"\"\",\n\t\t\t'\"SELECT ID,NAME FROM USERS\"'\n\n\t# ---------------------------------------------------------------------------\n\t#symbol \"TAML heredoc\"\n\n\tu.equal \"\"\"\n\t\t\t---\n\t\t\t- abc\n\t\t\t- def\n\t\t\t\"\"\",\n\t\t\t'[\"abc\",\"def\"]'\n\n\t# ---------------------------------------------------------------------------\n\t# TAML-like block, but actually a block\n\n\tu.equal \"\"\"\n\t\t\t===\n\t\t\t---\n\t\t\t- abc\n\t\t\t- def\n\t\t\t\"\"\",\n\t\t\t'\"---\\\\n- abc\\\\n- def\"'\n\n\t# ---------------------------------------------------------------------------\n\t# TAML block 2\n\n\tu.equal \"\"\"\n\t\t\t---\n\t\t\t-\n\t\t\t\tlabel: Help\n\t\t\t\turl: /help\n\t\t\t-\n\t\t\t\tlabel: Books\n\t\t\t\turl: /books\n\t\t\t\"\"\",\n\t\t\t'[{\"label\":\"Help\",\"url\":\"/help\"},{\"label\":\"Books\",\"url\":\"/books\"}]'\n\t)()\n\n# ---------------------------------------------------------------------------\n#symbol \"HereDocReplacer - custom tester\"\n\n(() =>\n\tu = new UnitTester()\n\tu.transformValue = (block) ->\n\n\t\t[head, rest] = behead(block)\n\t\tlNewParts = for part in lineToParts(head)\n\t\t\tif part == '<<<'\n\t\t\t\tmapHereDoc(undented(rest))\n\t\t\telse\n\t\t\t\tpart    # keep as is\n\n\t\tresult = lNewParts.join('')\n\t\treturn result\n\n\t# ---------------------------------------------------------------------------\n\n\tu.equal \"\"\"\n\t\t\tTopMenu lItems={<<<}\n\t\t\t\t---\n\t\t\t\t-\n\t\t\t\t\tlabel: Help\n\t\t\t\t\turl: /help\n\t\t\t\t-\n\t\t\t\t\tlabel: Books\n\t\t\t\t\turl: /books\n\t\t\t\"\"\", \"\"\"\n\t\t\tTopMenu lItems={[{\"label\":\"Help\",\"url\":\"/help\"},{\"label\":\"Books\",\"url\":\"/books\"}]}\n\t\t\t\"\"\"\n\n\t# ---------------------------------------------------------------------------\n\n\tu.equal \"\"\"\n\t\t\t<TopMenu lItems={<<<}>\n\t\t\t\t---\n\t\t\t\t-\n\t\t\t\t\tlabel: Help\n\t\t\t\t\turl: /help\n\t\t\t\t-\n\t\t\t\t\tlabel: Books\n\t\t\t\t\turl: /books\n\t\t\t\"\"\", \"\"\"\n\t\t\t<TopMenu lItems={[{\"label\":\"Help\",\"url\":\"/help\"},{\"label\":\"Books\",\"url\":\"/books\"}]}>\n\t\t\t\"\"\"\n\t)()\n"
  ]
}