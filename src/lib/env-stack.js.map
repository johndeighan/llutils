{
  "version": 3,
  "file": "env-stack.js",
  "sourceRoot": "..\\..\\",
  "sources": [
    "src\\lib\\env-stack.coffee"
  ],
  "names": [],
  "mappings": "AAAkB;AAElB,OAAA;EACC,KADD;EACQ,OADR;EACiB,UADjB;EAEC,MAFD;EAES,KAFT;CAAA,MAAA,oBAFkB;;;AASlB,OAAA,IAAa,UAAN,MAAA,QAAA;EAEN,WAAa,CAAA,CAAA;IAEZ,IAAC,CAAA,UAAD,GAAc,IAAI,GAAJ,CAAA;EAFF,CAAd;;;EAMC,GAAK,CAAC,IAAD,CAAA;AAEJ,WAAO,IAAC,CAAA,UAAU,CAAC,GAAZ,CAAgB,IAAhB;EAFH,CANN;;;EAYC,UAAY,CAAC,IAAD,CAAA;WAEX,IAAC,CAAA,UAAU,CAAC,GAAZ,CAAgB,IAAhB;EAFW;;AAdN,EATW;;;;AA8BlB,OAAA,IAAa,eAAN,MAAA,aAAA;EAEN,WAAa,CAAA,CAAA;IAEZ,IAAC,CAAA,WAAD,GAAe,IAAI,OAAJ,CAAA;IACf,IAAC,CAAA,WAAD,GAAe,IAAC,CAAA,WAAW,CAAC;IAC5B,IAAC,CAAA,aAAD,GAAiB,CAAC,IAAC,CAAA,WAAF;EAJL,CAAd;;;EAQC,KAAO,CAAA,CAAA;AAEN,WAAO,IAAC,CAAA,aAAa,CAAC,MAAf,GAAwB;EAFzB,CARR;;;EAcC,MAAQ,CAAA,CAAA;IAEP,IAAC,CAAA,aAAa,CAAC,IAAf,CAAoB,IAAI,OAAJ,CAAA,CAApB;EAFO,CAdT;;;EAqBC,MAAQ,CAAA,CAAA;AAET,QAAA;IAAE,MAAA,CAAQ,IAAC,CAAA,aAAa,CAAC,MAAf,GAAwB,CAAhC,EAAoC,iBAApC;IACA,GAAA,GAAM,IAAC,CAAA,aAAa,CAAC,GAAf,CAAA;IACN,MAAA,CAAO,OAAA,CAAQ,GAAR,CAAP,EAAqB,iBAArB;IACA,MAAA,CAAQ,GAAA,YAAe,OAAvB,EAAiC,gBAAjC;EALO,CArBT;;;EA+BC,MAAQ,CAAA,CAAA;AAEP,WAAO,IAAC,CAAA,aAAa,CAAC,EAAf,CAAkB,CAAC,CAAnB;EAFA,CA/BT;;;EAqCC,GAAK,CAAC,IAAD,CAAA;WAEJ,IAAC,CAAA,MAAD,CAAA,CAAS,CAAC,UAAV,CAAqB,IAArB;EAFI,CArCN;;;EA2CC,QAAU,CAAC,IAAD,CAAA;AAEX,QAAA,GAAA,EAAA,CAAA,EAAA,GAAA,EAAA;AAAE;IAAA,KAAA,qCAAA;;MACC,IAAG,GAAG,CAAC,GAAJ,CAAQ,IAAR,CAAH;AACC,eAAO,KADR;;IADD;AAGA,WAAO;EALE;;AA7CJ",
  "sourcesContent": [
    "# env-stack.coffee\r\n\r\nimport {\r\n\tundef, defined, notdefined,\r\n\tassert, croak,\r\n\t} from '@jdeighan/llutils'\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport class EnvNode\r\n\r\n\tconstructor: () ->\r\n\r\n\t\t@definedSet = new Set()\r\n\r\n\t# ..........................................................\r\n\r\n\thas: (name) ->\r\n\r\n\t\treturn @definedSet.has(name)\r\n\r\n\t# ..........................................................\r\n\r\n\taddDefined: (name) ->\r\n\r\n\t\t@definedSet.add name\r\n\r\n# ---------------------------------------------------------------------------\r\n# ---------------------------------------------------------------------------\r\n\r\nexport class EnvNodeStack\r\n\r\n\tconstructor: () ->\r\n\r\n\t\t@topLevelEnv = new EnvNode()\r\n\t\t@topLevelSet = @topLevelEnv.definedSet\r\n\t\t@lEnvironments = [@topLevelEnv]\r\n\r\n\t# ..........................................................\r\n\r\n\tlevel: () ->\r\n\r\n\t\treturn @lEnvironments.length - 1\r\n\r\n\t# ..........................................................\r\n\r\n\taddEnv: () ->\r\n\r\n\t\t@lEnvironments.push(new EnvNode())\r\n\t\treturn\r\n\r\n\t# ..........................................................\r\n\r\n\tendEnv: () ->\r\n\r\n\t\tassert (@lEnvironments.length > 0), \"No environments\"\r\n\t\tenv = @lEnvironments.pop()\r\n\t\tassert defined(env), \"env not defined\"\r\n\t\tassert (env instanceof EnvNode), \"not an EnvNode\"\r\n\t\treturn\r\n\r\n\t# ..........................................................\r\n\r\n\tcurenv: () ->\r\n\r\n\t\treturn @lEnvironments.at(-1)\r\n\r\n\t# ..........................................................\r\n\r\n\tadd: (name) ->\r\n\r\n\t\t@curenv().addDefined name\r\n\r\n\t# ..........................................................\r\n\r\n\tinCurEnv: (name) ->\r\n\r\n\t\tfor env in @lEnvironments\r\n\t\t\tif env.has(name)\r\n\t\t\t\treturn true\r\n\t\treturn false\r\n"
  ]
}