{
  "version": 3,
  "file": "proj-utils.js",
  "sourceRoot": "..\\..\\",
  "sources": [
    "src\\lib\\proj-utils.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "# proj-utils.coffee\r\n\r\nimport prompts from 'prompts'\r\n\r\nimport {\r\n\tundef, defined, notdefined, OL, LOG, getOptions,\r\n\tassert, croak, words, isEmpty, nonEmpty, hasKey,\r\n\tLOG_indent, LOG_undent, isArray,\r\n\t} from '@jdeighan/llutils'\r\nimport {\r\n\texecCmd, execCmdY,\r\n\t} from '@jdeighan/llutils/exec-utils'\r\nimport {BOX} from '@jdeighan/llutils/dump'\r\nimport {\r\n\tmkpath, isDir, mkDir, slurp, barf, clearDir,\r\n\tslurpJSON, barfJSON, slurpPkgJSON, barfPkgJSON,\r\n\ttouch, insertLinesAfter, fileExt,\r\n\t} from '@jdeighan/llutils/fs'\r\n\r\nexport lValidTypes = [\r\n\t'electron'\r\n\t'codemirror'\r\n\t'elm'\r\n\t'parcel'\r\n\t'vite'\r\n\t'none'\r\n\t]\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport checkIfInstalled = (...lCmds) =>\r\n\r\n\tfor cmd in lCmds\r\n\t\ttry\r\n\t\t\toutput = execCmd \"#{cmd} --version\"\r\n\t\t\treturn output\r\n\t\tcatch err\r\n\t\t\tLOG \"ERROR: #{cmd} is not installed\"\r\n\t\t\tprocess.exit()\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport promptForProjType = () =>\r\n\r\n\thResponse = await prompts({\r\n\t\ttype: 'select'\r\n\t\tname: 'type'\r\n\t\tmessage: 'Which type of project?'\r\n\t\tchoices: [\r\n\t\t\t{\r\n\t\t\t\ttitle: 'Bare'\r\n\t\t\t\tdescription: 'Bare project'\r\n\t\t\t\tvalue: 'none'\r\n\t\t\t\t}\r\n\t\t\t{\r\n\t\t\t\ttitle: 'parcel'\r\n\t\t\t\tdescription: 'parcel web site'\r\n\t\t\t\tvalue: 'parcel'\r\n\t\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: 'vite'\r\n\t\t\t\tdescription: 'vite web site'\r\n\t\t\t\tvalue: 'vite'\r\n\t\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: 'electron'\r\n\t\t\t\tdescription: 'electron app'\r\n\t\t\t\tvalue: 'electron'\r\n\t\t\t\t}\r\n\t\t\t{\r\n\t\t\t\ttitle: 'codemirror'\r\n\t\t\t\tdescription: 'codeMirror editor'\r\n\t\t\t\tvalue: 'codemirror'\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t});\r\n\treturn hResponse.type\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport makeProjDir = (dirname, hOptions={}) =>\r\n\r\n\t{clear} = getOptions hOptions, {\r\n\t\tclear: false\r\n\t\t}\r\n\r\n\trootDir = process.env.PROJECT_ROOT_DIR\r\n\tif ! isDir(rootDir)\r\n\t\tLOG \"\"\"\r\n\t\t\tPlease set env var PROJECT_ROOT_DIR to a valid directory\r\n\t\t\t\"\"\"\r\n\t\tprocess.exit()\r\n\r\n\t# === Create the new directory and cd to it\r\n\r\n\tnewDir = mkpath(rootDir, dirname)\r\n\tif isDir(newDir)\r\n\t\tif clear\r\n\t\t\tLOG \"Directory #{OL(newDir)} exists, clearing it out\"\r\n\t\t\tclearDir newDir\r\n\t\telse\r\n\t\t\tLOG \"Directory #{OL(newDir)} already exists\"\r\n\t\t\tLOG \"Aborting...\"\r\n\t\t\tprocess.exit()\r\n\telse\r\n\t\tLOG \"Creating directory #{newDir}\"\r\n\t\tmkDir newDir\r\n\r\n\tprocess.chdir newDir\r\n\tmake_dirs()\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nmake_dirs = () =>\r\n\r\n\tLOG \"Making directories\"\r\n\tLOG \"   ./src\"\r\n\tmkDir './src'\r\n\r\n\tLOG \"   ./src/lib\"\r\n\tmkDir './src/lib'\r\n\r\n\tLOG \"   ./src/bin\"\r\n\tmkDir './src/bin'\r\n\r\n\tLOG \"   ./test\"\r\n\tmkDir './test'\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n# --- Used in bins addUserBin, addUserLib, addUserElement\r\n# ---------------------------------------------------------------------------\r\n# --- valFunc is a validation function\r\n#        return undef if valid\r\n#        else return error message\r\n\r\nexport promptForNames = (prompt, valFunc=undef) =>\r\n\r\n\tlNames = []\r\n\tloop\r\n\t\thResponse = await prompts {\r\n\t\t\ttype: 'text',\r\n\t\t\tname: 'name',\r\n\t\t\tmessage: prompt\r\n\t\t\t}\r\n\t\tname = hResponse.name\r\n\t\tif name\r\n\t\t\tif validFunc && (msg = validFunc(name))\r\n\t\t\t\tLOG msg\r\n\t\t\telse\r\n\t\t\t\tlNames.push name\r\n\t\telse\r\n\t\t\treturn lNames\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport basicSetUp = (dirname, hOptions={}) =>\r\n\r\n\t{clear, type, subtype} = getOptions hOptions, {\r\n\t\tclear: false\r\n\t\ttype: undef\r\n\t\tsubtype: undef\r\n\t\t}\r\n\tmakeProjDir dirname, {clear}   # also cd's to proj dir\r\n\texecCmd \"git init\"\r\n\texecCmd \"git branch -m main\"\r\n\texecCmd \"npm init -y\"\r\n\r\n\tnodeEnv = new NodeEnv('fixPkgJson')\r\n\tnodeEnv.addDependency '@jdeighan/llutils'\r\n\tnodeEnv.addDevDependency 'concurrently'\r\n\tnodeEnv.setField 'description', \"A #{type} app\"\r\n\tnodeEnv.setField 'packageManager', 'yarn@1.22.22'\r\n\tnodeEnv.addFile 'README.md'\r\n\tnodeEnv.addFile '.gitignore'\r\n\tnodeEnv.addFile '.npmrc'\r\n\r\n\t# === Install libraries specified via env vars\r\n\r\n\tenv_installs = process.env.PROJECT_INSTALLS\r\n\tif nonEmpty(env_installs)\r\n\t\tfor pkg in words(env_installs)\r\n\t\t\tnodeEnv.addDependency pkg\r\n\r\n\tenv_dev_installs = process.env.PROJECT_DEV_INSTALLS\r\n\tif nonEmpty(env_dev_installs)\r\n\t\tfor pkg in words(env_dev_installs)\r\n\t\t\tnodeEnv.addDevDependency pkg\r\n\r\n\tnodeEnv.addDevDependency 'coffeescript'\r\n\tnodeEnv.addDevDependency 'ava'\r\n\treturn nodeEnv\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nsetUpWebSite = (nodeEnv, subtype=undef) =>\r\n\r\n\tLOG \"mkdir ./src/elements\"\r\n\tmkDir './src/elements'\r\n\r\n\tnodeEnv.addDevDependency 'svelte'\r\n\r\n\tLOG \"Creating src/index.html\"\r\n\tbarf \"\"\"\r\n\t\t<!DOCTYPE html>\r\n\t\t<html lang=\"en\">\r\n\t\t\t<head>\r\n\t\t\t\t<meta charset=\"utf-8\">\r\n\t\t\t\t<title>Web Site</title>\r\n\t\t\t</head>\r\n\t\t\t<body>\r\n\t\t\t\t<h1>Hello, World!</h1>\r\n\t\t\t\t<script type=\"module\">\r\n\t\t\t\t\timport './main.js';\r\n\t\t\t\t\t// --- Custom Element Imports\r\n\t\t\t\t</script>\r\n\t\t\t</body>\r\n\t\t</html>\r\n\t\t\"\"\", \"./src/index.html\"\r\n\r\n\tbarf \"\"\"\r\n\t\t# --- main.coffee\r\n\r\n\t\timport {escapeStr} from '@jdeighan/llutils'\r\n\t\tLOG escapeStr(\"\\t\\tabc\\r\\n\")\r\n\t\t\"\"\", \"./src/main.coffee\"\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport importCustomElement = (name) =>\r\n\r\n\tinsertLinesAfter(\r\n\t\t\"./src/main.coffee\",\r\n\t\t/Custom Element Imports/,\r\n\t\t\"\\t\\t\\timport ./elements/#{name}.js\"\r\n\t\t)\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nsetUpElm = (nodeEnv, subtype=undef) =>\r\n\r\n\tcheckIfInstalled 'elm'\r\n\tcheckIfInstalled 'elm-live'\r\n\r\n\tLOG \"mkdir ./src/elements\"\r\n\tmkDir './src/elements'\r\n\r\n\tnodeEnv.addDevDependency 'svelte'\r\n\r\n\t# --- NOTE: script build:all was defined in basicSetUp()\r\n\tnodeEnv.addScript 'build',  \"npm run build:all && elm make src/Main.elm --output=main.js\"\r\n\tnodeEnv.addScript 'dev',    \"npm run build:all && elm-live src/Main.elm -- --debug --output=main.js\"\r\n\r\n\tLOG \"initializing elm\"\r\n\texecCmdY \"elm init\"\r\n\tLOG \"elm is initialized\"\r\n\tfor lib in [\r\n\t\t\t\"elm/http\"\r\n\t\t\t\"elm/json\"\r\n\t\t\t\"elm/regex\"\r\n\t\t\t\"mdgriffith/elm-ui\"\r\n\t\t\t\"phollyer/elm-ui-colors\"\r\n\t\t\t]\r\n\t\tLOG \"installing elm lib #{lib}\"\r\n\t\texecCmdY \"elm install #{lib}\"\r\n\r\n\tnodeEnv.addFile \"src/global.css\", \"\"\"\r\n\t\t/* Put your global styles here */\r\n\t\t\"\"\"\r\n\r\n\tnodeEnv.addFile \"./index.html\",  \"\"\"\r\n\t\t<!DOCTYPE html>\r\n\t\t<html lang=\"en\">\r\n\t\t<head>\r\n\t\t\t<meta charset=\"utf-8\">\r\n\t\t\t<meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\r\n\t\t\t<meta name=\"viewport\" content=\"width=device-width\">\r\n\t\t\t<title>Elm Web Site</title>\r\n\t\t\t<link rel=\"stylesheet\" href=\"src/global.css\">\r\n\t\t\t<script src=\"main.js\"></script>\r\n\t\t</head>\r\n\r\n\t\t<body>\r\n\t\t\t<main></main>\r\n\t\t\t<script>\r\n\t\t\t\tElm.Main.init({\r\n\t\t\t\t\tnode: document.querySelector('main'),\r\n\t\t\t\t\tflags: {\r\n\t\t\t\t\t\twidth: window.innerWidth,\r\n\t\t\t\t\t\theight: window.innerHeight\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t</script>\r\n\t\t</body>\r\n\t\t</html>\r\n\t\t\"\"\"\r\n\r\n\tnodeEnv.addFile \"./src/Model.elm\", \"\"\"\r\n\t\tmodule Model exposing(..)\r\n\r\n\t\ttype alias Model = {\r\n\t\t\twidth: Int,\r\n\t\t\theight: Int,\r\n\t\t\tdeviceKind: String,\r\n\t\t\ttitle: String\r\n\t\t\t}\r\n\t\t\"\"\"\r\n\r\n\tnodeEnv.addFile \"./src/Main.elm\", \"\"\"\r\n\t\tmodule Main exposing(main)\r\n\r\n\t\timport Browser exposing(element)\r\n\t\timport Browser.Events exposing(onResize)\r\n\t\timport Html exposing(Html)\r\n\t\timport Element exposing(..)\r\n\t\timport Element.Events exposing(..)\r\n\t\timport Element.Input as Input\r\n\t\timport Model exposing(..)\r\n\t\timport Utils exposing(..)\r\n\r\n\t\t--------------------------------------\r\n\r\n\t\ttype Msg =\r\n\t\t\t  WindowResized Int Int\r\n\r\n\t\t--------------------------------------\r\n\r\n\t\tmain : Program Flags Model Msg\r\n\t\tmain =\r\n\t\t\telement {\r\n\t\t\t\tinit = init,\r\n\t\t\t\tview = vMain,\r\n\t\t\t\tupdate = updateFunc,\r\n\t\t\t\tsubscriptions = subscriptions\r\n\t\t\t\t}\r\n\r\n\t\t--------------------------------------\r\n\r\n\t\tvMain: Model -> Html Msg\r\n\t\tvMain model = layout\r\n\t\t\t[]\r\n\t\t\t(row\r\n\t\t\t\t[centerX, spacing 25]\r\n\t\t\t\t[\r\n\t\t\t\t\t(el\r\n\t\t\t\t\t\t[centerX, fontSize 32]\r\n\t\t\t\t\t\t(text model.title)\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t(vDevice model)\r\n\t\t\t\t\t]\r\n\t\t\t\t)\r\n\r\n\t\tvDevice: Model -> Element Msg\r\n\t\tvDevice model =\r\n\t\t\t( el\r\n\t\t\t\t[fontSize 18]\r\n\t\t\t\t(txtDevice model)\r\n\t\t\t\t)\r\n\r\n\t\ttxtDevice: Model -> Element msg\r\n\t\ttxtDevice model =\r\n\t\t\t(text (\"(device: \" ++ model.deviceKind ++ \")\" ) )\r\n\r\n\t\t--------------------------------------\r\n\r\n\t\tinit: Flags -> (Model, Cmd arg)\r\n\t\tinit f =\r\n\t\t\t(\r\n\t\t\t\t{\r\n\t\t\t\t\twidth = f.width,\r\n\t\t\t\t\theight = f.height,\r\n\t\t\t\t\tdeviceKind = deviceKind f.width f.height,\r\n\t\t\t\t\ttitle = \"Hello there\"\r\n\t\t\t\t\t},\r\n\t\t\t\tCmd.none\r\n\t\t\t\t)\r\n\r\n\t\t--------------------------------------\r\n\r\n\t\tupdateFunc : Msg -> Model -> (Model, Cmd arg)\r\n\t\tupdateFunc msg model =\r\n\t\t\tcase msg of\r\n\t\t\t\tWindowResized w h ->\r\n\t\t\t\t\t(\r\n\t\t\t\t\t\t{model |\r\n\t\t\t\t\t\t\twidth = w,\r\n\t\t\t\t\t\t\theight = h,\r\n\t\t\t\t\t\t\tdeviceKind = deviceKind w h\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\tCmd.none\r\n\t\t\t\t\t\t)\r\n\r\n\t\t--------------------------------------\r\n\r\n\t\tsubscriptions: Model -> (Sub Msg)\r\n\t\tsubscriptions model =\r\n\t\t\tonResize WindowResized\r\n\t\t\"\"\"\r\n\r\n\tnodeEnv.addFile \"./src/Utils.elm\", \"\"\"\r\n\t\tmodule Utils exposing(..)\r\n\r\n\t\timport Element exposing(..)\r\n\t\timport Html.Attributes\r\n\t\timport Element.Font as Font\r\n\r\n\t\tid: String -> Attribute msg\r\n\t\tid theID = htmlAttribute (Html.Attributes.id theID)\r\n\r\n\t\tclass: String -> Attribute msg\r\n\t\tclass theClass = htmlAttribute (Html.Attributes.class theClass)\r\n\r\n\t\tfontSize: Int -> Attribute msg\r\n\t\tfontSize = Font.size\r\n\r\n\t\t------------------------------\r\n\r\n\t\ttype alias Flags = {\r\n\t\t\theight: Int,\r\n\t\t\twidth: Int\r\n\t\t\t}\r\n\r\n\t\t------------------------------\r\n\r\n\t\tdeviceKind: Int -> Int -> String\r\n\t\tdeviceKind width height =\r\n\t\t\tif (width > 2000) then\r\n\t\t\t\t\"big desktop\"\r\n\t\t\telse if (width > 1200) then\r\n\t\t\t\t\"desktop\"\r\n\t\t\telse if (width > 700) then\r\n\t\t\t\t\"tablet\"\r\n\t\t\telse\r\n\t\t\t\t\"cell phone\"\r\n\t\t\"\"\"\r\n\r\n\tnodeEnv.addFile \"./src/Ports.elm\", \"\"\"\r\n\t\tport module Ports exposing (..)\r\n\r\n\t\tport storeModel : String -> Cmd msg\r\n\r\n\t\timport Json.Encode as Encode\r\n\t\timport Model exposing(..)\r\n\r\n\t\tencodeModel : Model -> Cmd msg\r\n\t\tencodeModel model =\r\n\t\t\tEncode.object postEncoder posts\r\n\t\t\t\t|> Encode.encode 0\r\n\t\t\t\t|> Ports.storeModel\r\n\t\t\"\"\"\r\n\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nsetUpParcel = (nodeEnv, subtype=undef) =>\r\n\r\n\tnodeEnv.addDevDependency 'parcel'\r\n\tnodeEnv.setField  'source', 'src/index.html'\r\n\tnodeEnv.addScript 'dev',    'concurrently --kill-others \"llb -w\" \"parcel\"'\r\n\tnodeEnv.addScript 'build',  'llb && parcel build'\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nsetUpVite = (nodeEnv, subtype=undef) =>\r\n\r\n\tnodeEnv.addDevDependency 'vite'\r\n\tnodeEnv.addDevDependency 'vite-plugin-top-level-await'\r\n\tnodeEnv.setField  'source', 'src/index.html'\r\n\tnodeEnv.addScript 'dev',    'concurrently --kill-others \"llb -w\" \"vite -c src/vite.config.js src\"'\r\n\tnodeEnv.addScript 'build',  'llb && vite build'\r\n\tbarf \"\"\"\r\n\t\timport topLevelAwait from \"vite-plugin-top-level-await\";\r\n\r\n\t\texport default {\r\n\t\t\tbuild: {\r\n\t\t\t\ttarget: 'esnext'\r\n\t\t\t\t},\r\n\t\t\tplugins: [\r\n\t\t\t\ttopLevelAwait({\r\n\t\t\t\t\tpromiseExportName: \"__tla\",\r\n\t\t\t\t\tpromiseImportName: i => `__tla_${i}`\r\n\t\t\t\t\t})\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t\"\"\", \"./src/vite.config.js\"\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nsetUpElectron = (nodeEnv, subtype=undef) =>\r\n\r\n\tnodeEnv.setField 'main', 'src/main.js'\r\n\tnodeEnv.addScript 'start', 'npm run build && electron .'\r\n\r\n\tLOG \"Installing (dev) \\\"electron\\\"\"\r\n\tnodeEnv.addDevDependency 'electron'\r\n\r\n\tLOG \"Creating src/main.coffee\"\r\n\tbarf \"\"\"\r\n\t\timport pathLib from 'node:path'\r\n\t\timport {app, BrowserWindow} from 'electron'\r\n\r\n\t\tapp.on 'ready', () =>\r\n\t\t\twin = new BrowserWindow({\r\n\t\t\t\twidth: 800,\r\n\t\t\t\theight: 600\r\n\t\t\t\twebPreferences: {\r\n\t\t\t\t\tnodeIntegration: true\r\n\t\t\t\t\tpreload: pathLib.join(import.meta.dirname, 'preload.js')\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t# --- win.loadFile('src/index.html')\r\n\t\t\twin.loadURL(\"file://#{import.meta.dirname}/index.html\")\r\n\t\t\t\"\"\", \"./src/main.coffee\"\r\n\r\n\t# ..........................................................\r\n\r\n\tLOG \"Creating src/index.html\"\r\n\tbarf \"\"\"\r\n\t\t<!DOCTYPE html>\r\n\t\t<html lang=\"en\">\r\n\t\t\t<head>\r\n\t\t\t\t<meta charset=\"UTF-8\">\r\n\t\t\t\t<!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP -->\r\n\t\t\t\t<meta http-equiv=\"Content-Security-Policy\" content=\"default-src 'self'; script-src 'self'\">\r\n\t\t\t\t<title>Electron App</title>\r\n\t\t\t</head>\r\n\t\t\t<body>\r\n\t\t\t\t<h1>Electron App, using:</h1>\r\n\t\t\t\t<p span id=\"node-version\">node-version</p>\r\n\t\t\t\t<p span id=\"chrome-version\">chrome-version</p>\r\n\t\t\t\t<p span id=\"electron-version\">electron-version</p>\r\n\t\t\t\tby <p id=\"myname\">My Name Here</p>\r\n\t\t\t\t<script src=\"./renderer.js\"></script>\r\n\t\t\t</body>\r\n\t\t</html>\r\n\t\t\"\"\", \"./src/index.html\"\r\n\r\n\t# ..........................................................\r\n\r\n\tLOG \"Creating src/preload.coffee\"\r\n\tbarf \"\"\"\r\n\t\t# --- preload.coffee has access to window,\r\n\t\t#     document and NodeJS globals\r\n\r\n\t\twindow.addEventListener 'DOMContentLoaded', () =>\r\n\t\t\treplaceText = (selector, text) =>\r\n\t\t\t\telem = document.getElementById(selector)\r\n\t\t\t\tif (elem)\r\n\t\t\t\t\telem.innerText = text\r\n\r\n\t\t\tfor dep in ['chrome','node','electron']\r\n\t\t\t\tstr = \"\\#{dep} version \\#{process.versions[dep]}\"\r\n\t\t\t\treplaceText \"\\#{dep}-version\", str\r\n\t\t\"\"\", \"./src/preload.coffee\"\r\n\r\n\t# ..........................................................\r\n\r\n\tLOG \"Creating src/renderer.coffee\"\r\n\tbarf \"\"\"\r\n\t\t# --- preload.coffee has access to window and document\r\n\r\n\t\telem = document.getElementById('myname')\r\n\t\tif elem\r\n\t\t\telem.innerText = '#{author}'\r\n\t\telse\r\n\t\t\tLOG \"No element with id 'myname'\"\r\n\t\t\"\"\", \"./src/renderer.coffee\"\r\n\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nsetUpCodeMirror = (nodeEnv, subtype=undef) =>\r\n\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n# --- 1. Read in current package.json\r\n#     2. If option 'fix':\r\n#        - get keys from env var PROJECT_PACKAGE_JSON\r\n#        - overwrite keys in package.json\r\n#        - adjust name if env var PROJECT_NAME_PREFIX is set\r\n\r\nexport class NodeEnv\r\n\r\n\tconstructor: (hOptions={}) ->\r\n\r\n\t\t{fixPkgJson, echo: @echo} = getOptions hOptions, {\r\n\t\t\tfixPkgJson: false\r\n\t\t\techo: true\r\n\t\t\t}\r\n\t\t@hJson = slurpPkgJSON()\r\n\t\tif fixPkgJson\r\n\t\t\t@mergeKeysFromEnv()\r\n\t\t\tprefix = process.env.PROJECT_NAME_PREFIX\r\n\t\t\tif nonEmpty(prefix) && ! @hJson.name.startsWith(prefix)\r\n\t\t\t\t@setField 'name', \"#{prefix}#{@hJson.name}\"\r\n\t\t\t@setField 'license', 'MIT'\r\n\r\n\t# ..........................................................\r\n\r\n\tmergeKeysFromEnv: () ->\r\n\r\n\t\tpkgJson = process.env.PROJECT_PACKAGE_JSON\r\n\t\tif nonEmpty(pkgJson)\r\n\t\t\t# --- Can be either a JSON string or a file path\r\n\t\t\tif (pkgJson.indexOf('{') == 0)\r\n\t\t\t\thSetKeys = JSON.parse(pkgJson)\r\n\t\t\telse\r\n\t\t\t\thSetKeys = slurpJSON(pkgJson)\r\n\t\t\tObject.assign @hJson, hSetKeys\r\n\t\treturn\r\n\r\n\t# ..........................................................\r\n\r\n\tname: () ->\r\n\r\n\t\treturn @hJson.name\r\n\r\n\t# ..........................................................\r\n\r\n\tgetField: (name) ->\r\n\r\n\t\treturn @hJson[name]\r\n\r\n\t# ..........................................................\r\n\r\n\tsetField: (name, value) ->\r\n\r\n\t\t@hJson[name] = value\r\n\t\tif @echo\r\n\t\t\tLOG \"   SET #{name} = #{OL(value)}\"\r\n\t\treturn\r\n\r\n\t# ..........................................................\r\n\r\n\taddScript: (name, str) ->\r\n\r\n\t\tif ! hasKey(@hJson, 'scripts')\r\n\t\t\t@hJson.scripts = {}\r\n\t\t@hJson.scripts[name] = str\r\n\t\tif @echo\r\n\t\t\tLOG \"   ADD SCRIPT #{OL(name)}\"\r\n\t\treturn\r\n\r\n\t# ..........................................................\r\n\r\n\taddExport: (name, str) ->\r\n\r\n\t\tif ! hasKey(@hJson, 'exports')\r\n\t\t\t@hJson.exports = {}\r\n\t\t@hJson.exports[name] = str\r\n\t\tif @echo\r\n\t\t\tLOG \"   ADD EXPORT #{OL(name)}\"\r\n\t\treturn\r\n\r\n\t# ..........................................................\r\n\r\n\taddUserBin: (name) ->\r\n\r\n\t\tbarf \"\"\"\r\n\t\t\t# --- #{name}.coffee\r\n\r\n\r\n\t\t\t\"\"\", \"./src/bin/#{name}.coffee\"\r\n\r\n\t\tif ! hasKey(@hJson, 'bin')\r\n\t\t\t@hJson.bin = {}\r\n\t\t@hJson.bin[name] = \"./src/bin/#{name}.js\"\r\n\t\tif @echo\r\n\t\t\tLOG \"   ADD BIN #{OL(name)}\"\r\n\t\treturn\r\n\r\n\t# ..........................................................\r\n\r\n\taddUserLib: (name) ->\r\n\r\n\t\tbarf \"\"\"\r\n\t\t\t# --- #{name}.coffee\r\n\r\n\r\n\t\t\t\"\"\", \"./src/lib/#{name}.coffee\"\r\n\r\n\t\t# --- Add a unit test\r\n\t\tbarf \"\"\"\r\n\t\t\t# --- #{name}.test.offee\r\n\r\n\t\t\timport * as lib from './#{name}'\r\n\t\t\tObject.assign(global, lib)\r\n\t\t\timport * as lib2 from '@jdeighan/llutils/utest'\r\n\t\t\tObject.assign(global, lib2)\r\n\r\n\t\t\tequal 2+2, 4\r\n\t\t\t\"\"\", \"./test/#{name}.test.coffee\"\r\n\r\n\t\t@addExport \"./#{name}\", \"./src/lib/#{name}.js\"\r\n\r\n\t\tif ! hasKey(@hJson, 'bin')\r\n\t\t\t@hJson.bin = {}\r\n\t\t@hJson.bin[name] = \"./src/bin/#{name}.js\"\r\n\t\tif @echo\r\n\t\t\tLOG \"   ADD BIN #{name}\"\r\n\t\treturn\r\n\r\n\t# ..........................................................\r\n\r\n\taddUserElement: (name) ->\r\n\r\n\t\tbarf \"\"\"\r\n\t\t\t<!-- #{name}.svelte -->\r\n\t\t\t<svelte:options customElement=\"#{name}\" />\r\n\t\t\t<p>A new element</p>\r\n\r\n\t\t\t\"\"\", \"./src/elements/#{name}.svelte\"\r\n\r\n\t\t@addExport \"./#{name}\", \"./src/elements/#{name}.js\"\r\n\t\tif @echo\r\n\t\t\tLOG \"   ADD ELEMENT #{name}\"\r\n\t\treturn\r\n\r\n\t# ..........................................................\r\n\r\n\thasDep: (pkg) ->\r\n\r\n\t\tif hasKey(@hJson, 'dependencies')\r\n\t\t\treturn hasKey(@hJson.dependencies, pkg)\r\n\t\telse\r\n\t\t\treturn false\r\n\r\n\t# ..........................................................\r\n\r\n\thasDevDep: (pkg) ->\r\n\r\n\t\tif hasKey(@hJson, 'devDependencies')\r\n\t\t\treturn hasKey(@hJson.devDependencies, pkg)\r\n\t\telse\r\n\t\t\treturn false\r\n\r\n\t# ..........................................................\r\n\r\n\tremoveDep: (pkg) ->\r\n\r\n\t\tif @hasDep(pkg)\r\n\t\t\tdelete @hJson.dependencies[pkg]\r\n\t\tif @hasDevDep(pkg)\r\n\t\t\tdelete @hJson.devDependencies[pkg]\r\n\t\treturn\r\n\r\n\t# ..........................................................\r\n\r\n\taddDependency: (pkg) ->\r\n\r\n\t\tif ! hasKey(@hJson, 'dependencies')\r\n\t\t\t@hJson.dependencies = {}\r\n\t\t@removeDep pkg\r\n\t\tversion = getVersion(pkg)\r\n\t\t@hJson.dependencies[pkg] = version\r\n\t\tif @echo\r\n\t\t\tLOG \"   DEP #{pkg} = #{OL(version)}\"\r\n\t\treturn\r\n\r\n\t# ..........................................................\r\n\r\n\taddDevDependency: (pkg) ->\r\n\r\n\t\tif ! hasKey(@hJson, 'devDependencies')\r\n\t\t\t@hJson.devDependencies = {}\r\n\t\t@removeDep pkg\r\n\t\tversion = getVersion(pkg)\r\n\t\t@hJson.devDependencies[pkg] = version\r\n\t\tif @echo\r\n\t\t\tLOG \"   DEV DEP #{pkg} = #{OL(version)}\"\r\n\t\treturn\r\n\r\n\t# ..........................................................\r\n\r\n\tisInstalled: (pkg) ->\r\n\r\n\t\treturn hasKey(@hJson.dependencies, pkg) \\\r\n\t\t\t\t|| hasKey(@hJson.devDependencies, pkg)\r\n\r\n\t# ..........................................................\r\n\r\n\twrite_pkg_json: () ->\r\n\r\n\t\t@addExport \"./package.json\", \"./package.json\"\r\n\t\tbarfPkgJSON @hJson\r\n\t\treturn\r\n\r\n\t# ..........................................................\r\n\r\n\taddFile: (fileName, contents=undef) ->\r\n\r\n\t\tif @echo\r\n\t\t\tLOG \"ADD FILE #{OL(fileName)}\"\r\n\r\n\t\tif defined(contents)\r\n\t\t\tif (fileExt(fileName) == '.elm')\r\n\t\t\t\tcontents = contents.replaceAll(\"\\t\", \"   \")\r\n\t\t\tbarf contents, fileName\r\n\t\t\treturn\r\n\r\n\t\tswitch fileName\r\n\r\n\t\t\twhen 'README.md'\r\n\t\t\t\tbarf contents || \"\"\"\r\n\t\t\t\t\tREADME.md file\r\n\t\t\t\t\t==============\r\n\r\n\r\n\t\t\t\t\t\"\"\", \"./README.md\"\r\n\r\n\t\t\twhen '.gitignore'\r\n\t\t\t\tbarf contents || \"\"\"\r\n\t\t\t\t\tlogs/\r\n\t\t\t\t\tnode_modules/\r\n\t\t\t\t\ttypings/\r\n\t\t\t\t\t*.tsbuildinfo\r\n\t\t\t\t\t.npmrc\r\n\t\t\t\t\t/build\r\n\t\t\t\t\t/public\r\n\t\t\t\t\t/dist\r\n\r\n\t\t\t\t\t# dotenv environment variables file\r\n\t\t\t\t\t.env\r\n\t\t\t\t\t.env.test\r\n\r\n\t\t\t\t\ttest/temp*.*\r\n\t\t\t\t\t/.svelte-kit\r\n\t\t\t\t\t\"\"\", \"./.gitignore\"\r\n\r\n\t\t\twhen '.npmrc'\r\n\t\t\t\tbarf contents || \"\"\"\r\n\t\t\t\t\tengine-strict=true\r\n\t\t\t\t\t# --- loglevel can be silent or warn\r\n\t\t\t\t\tloglevel=silent\r\n\t\t\t\t\t\"\"\", \"./.npmrc\"\r\n\r\n\t\t\telse\r\n\t\t\t\tcroak \"addFile #{OL(fileName)} not implemented\"\r\n\t\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nhSetUpFuncs = {\r\n\twebsite:    [setUpWebSite]\r\n\telm:        [setUpElm]\r\n\tparcel:     [setUpWebSite, setUpParcel]\r\n\tvite:       [setUpWebSite, setUpVite]\r\n\telectron:   [setUpElectron]\r\n\tcodemirror: [setUpElectron, setUpCodeMirror]\r\n\t}\r\n\r\nexport typeSpecificSetup = (nodeEnv, type, subtype=undef) =>\r\n\r\n\tlFuncs = hSetUpFuncs[type]\r\n\tif isArray(lFuncs)\r\n\t\tfor func in lFuncs\r\n\t\t\tLOG \"SET UP #{OL(type)}\"\r\n\t\t\tLOG_indent()\r\n\t\t\tfunc(nodeEnv, subtype)\r\n\t\t\tLOG_undent()\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\ngetVersion = (pkg) =>\r\n\r\n\tswitch pkg\r\n\t\twhen 'coffeescript'\r\n\t\t\treturn \"^2.7.0\"\r\n\t\twhen 'concurrently'\r\n\t\t\treturn \"^9.0.1\"\r\n\t\twhen 'ava'\r\n\t\t\treturn \"^6.1.3\"\r\n\t\twhen 'svelte'\r\n\t\t\treturn \"^5.0.0-next.200\"\r\n\t\twhen 'gulp'\r\n\t\t\treturn \"^5.0.0\"\r\n\t\twhen 'parcel'\r\n\t\t\treturn \"^2.12.0\"\r\n\t\twhen 'vite'\r\n\t\t\treturn \"^5.4.0\"\r\n\t\twhen 'elm-live'\r\n\t\t\treturn \"^4.0.2\"\r\n\t\twhen 'vite-plugin-top-level-await'\r\n\t\t\treturn \"^1.4.3\"\r\n\t\telse\r\n\t\t\treturn '*'\r\n"
  ]
}