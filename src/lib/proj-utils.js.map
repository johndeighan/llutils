{
  "version": 3,
  "file": "proj-utils.js",
  "sourceRoot": "..\\..\\",
  "sources": [
    "src\\lib\\proj-utils.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "# proj-utils.coffee\r\n\r\nimport prompts from 'prompts'\r\n\r\nimport {\r\n\tundef, defined, notdefined, OL, getOptions,\r\n\tassert, words,\r\n\t} from '@jdeighan/llutils'\r\nimport {execCmd} from '@jdeighan/llutils/exec-utils'\r\nimport {BOX} from '@jdeighan/llutils/dump'\r\nimport {\r\n\tmkpath, isDir, mkDir, slurp, barf, clearDir,\r\n\tslurpJSON, barfJSON, barfPkgJSON, touch, insertLinesAfter,\r\n\t} from '@jdeighan/llutils/fs'\r\n\r\nlValidTypes = [\r\n\t'electron'\r\n\t'codemirror'\r\n\t'parcel'\r\n\t'vite'\r\n\t'none'\r\n\t]\r\ntype = 'none'\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport checkIfInstalled = (...lCmds) =>\r\n\r\n\tfor cmd in lCmds\r\n\t\ttry\r\n\t\t\toutput = execCmd \"#{cmd} --version\"\r\n\t\t\treturn output\r\n\t\tcatch err\r\n\t\t\tconsole.log \"ERROR #{cmd} is not installed\"\r\n\t\t\tprocess.exit()\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport setProjType = (t) =>\r\n\r\n\tif (t == 'website')\r\n\t\ttype = 'parcel'    # default web site type\r\n\tassert defined(t), \"type is undef\"\r\n\tassert lValidTypes.includes(t), \"Bad type: #{OL(t)}\"\r\n\ttype = t\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n# --- For example, isType('electron') will return true\r\n#     when type is 'codemirror'\r\n\r\nexport isOfType = (t) =>\r\n\r\n\tswitch t\r\n\t\twhen 'electron'\r\n\t\t\treturn (type == 'electron') || (type == 'codemirror')\r\n\t\twhen 'website'\r\n\t\t\treturn (type == 'parcel') || (type == 'vite')\r\n\t\telse\r\n\t\t\treturn (type == t)\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport promptForProjType = () =>\r\n\r\n\thResponse = await prompts({\r\n\t\ttype: 'select'\r\n\t\tname: 'type'\r\n\t\tmessage: 'Which type of project?'\r\n\t\tchoices: [\r\n\t\t\t{\r\n\t\t\t\ttitle: 'Bare'\r\n\t\t\t\tdescription: 'Bare project'\r\n\t\t\t\tvalue: 'none'\r\n\t\t\t\t}\r\n\t\t\t{\r\n\t\t\t\ttitle: 'parcel'\r\n\t\t\t\tdescription: 'parcel web site'\r\n\t\t\t\tvalue: 'parcel'\r\n\t\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: 'vite'\r\n\t\t\t\tdescription: 'vite web site'\r\n\t\t\t\tvalue: 'vite'\r\n\t\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: 'electron'\r\n\t\t\t\tdescription: 'electron app'\r\n\t\t\t\tvalue: 'electron'\r\n\t\t\t\t}\r\n\t\t\t{\r\n\t\t\t\ttitle: 'codemirror'\r\n\t\t\t\tdescription: 'codeMirror editor'\r\n\t\t\t\tvalue: 'codemirror'\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t});\r\n\tsetProjType hResponse.type\r\n\treturn type\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport makeProjDir = (dirname, hOptions={}) =>\r\n\r\n\t{clear} = getOptions hOptions, {\r\n\t\tclear: false\r\n\t\t}\r\n\r\n\trootDir = process.env.PROJECT_ROOT_DIR\r\n\tif ! isDir(rootDir)\r\n\t\tconsole.log \"\"\"\r\n\t\t\tPlease set env var PROJECT_ROOT_DIR to a valid directory\r\n\t\t\t\"\"\"\r\n\t\tprocess.exit()\r\n\r\n\t# === Create the new directory and cd to it\r\n\r\n\tnewDir = mkpath(rootDir, dirname)\r\n\tif isDir(newDir)\r\n\t\tif clear\r\n\t\t\tconsole.log \"Directory #{OL(newDir)} exists, clearing it out\"\r\n\t\t\tclearDir newDir\r\n\t\telse\r\n\t\t\tconsole.log \"Directory #{OL(newDir)} already exists\"\r\n\t\t\tconsole.log \"Aborting...\"\r\n\t\t\tprocess.exit()\r\n\telse\r\n\t\tconsole.log \"Creating directory #{newDir}\"\r\n\t\tmkDir newDir\r\n\r\n\tprocess.chdir newDir\r\n\tmake_dirs()\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nmake_dirs = () =>\r\n\r\n\tconsole.log \"Making directories\"\r\n\tconsole.log \"   ./src\"\r\n\tmkDir './src'\r\n\r\n\tconsole.log \"   ./src/lib\"\r\n\tmkDir './src/lib'\r\n\r\n\tconsole.log \"   ./src/bin\"\r\n\tmkDir './src/bin'\r\n\r\n\tif isOfType('website')\r\n\t\tconsole.log \"   ./src/elements\"\r\n\t\tmkDir './src/elements'\r\n\r\n\tconsole.log \"   ./test\"\r\n\tmkDir './test'\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n# --- Used in bins addUserBin, addUserLib, addUserElement\r\n# ---------------------------------------------------------------------------\r\n# --- valFunc is a validation function\r\n#        return undef if valid\r\n#        else return error message\r\n\r\nexport promptForNames = (prompt, valFunc=undef) =>\r\n\r\n\tlNames = []\r\n\tloop\r\n\t\thResponse = await prompts {\r\n\t\t\ttype: 'text',\r\n\t\t\tname: 'name',\r\n\t\t\tmessage: prompt\r\n\t\t\t}\r\n\t\tname = hResponse.name\r\n\t\tif name\r\n\t\t\tif validFunc && (msg = validFunc(name))\r\n\t\t\t\tconsole.log msg\r\n\t\t\telse\r\n\t\t\t\tlNames.push name\r\n\t\telse\r\n\t\t\treturn lNames\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport typeSpecificSetup = (nodeEnv) =>\r\n\r\n\tif isOfType('website')\r\n\t\tsetUpWebSite(nodeEnv)\r\n\tif isOfType('parcel')\r\n\t\tsetUpParcel(nodeEnv)\r\n\tif isOfType('vite')\r\n\t\tsetUpVite(nodeEnv)\r\n\tif isOfType('electron')\r\n\t\tsetUpElectron(nodeEnv)\r\n\tif isOfType('codemirror')\r\n\t\tsetUpCodeMirror(nodeEnv)\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport setUpWebSite = (node) =>\r\n\r\n\tconsole.log \"Installing svelte\"\r\n\tnode.addDevDependency 'svelte'\r\n\r\n\tconsole.log \"Creating src/index.html\"\r\n\tbarf \"\"\"\r\n\t\t<!DOCTYPE html>\r\n\t\t<html lang=\"en\">\r\n\t\t\t<head>\r\n\t\t\t\t<meta charset=\"utf-8\">\r\n\t\t\t\t<title>Web Site</title>\r\n\t\t\t</head>\r\n\t\t\t<body>\r\n\t\t\t\t<h1>Hello, World!</h1>\r\n\t\t\t\t<script type=\"module\">\r\n\t\t\t\t\timport './index.js';\r\n\t\t\t\t\t<!-- Custom Elements --->\r\n\t\t\t\t</script>\r\n\t\t\t</body>\r\n\t\t</html>\r\n\t\t\"\"\", \"./src/index.html\"\r\n\r\n\tbarf \"\"\"\r\n\t\t# index.coffee\r\n\r\n\t\timport {escapeStr} from '@jdeighan/llutils'\r\n\t\tconsole.log escapeStr(\"\\t\\tabc\\r\\n\")\r\n\t\t\"\"\", \"./src/index.coffee\"\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport importCustomElement = (name) =>\r\n\r\n\tinsertLinesAfter(\r\n\t\t\"./src/index.coffee\",\r\n\t\t/Custom Elements/,\r\n\t\t\"import ./#{name}\"\r\n\t\t)\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport setUpParcel = (node) =>\r\n\r\n\tnode.addDevDependency 'parcel'\r\n\tnode.setField  'source', 'src/index.html'\r\n\tnode.addScript 'dev',    'concurrently \"llb -w\" \"parcel\"'\r\n\tnode.addScript 'build',  'llb && parcel build'\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport setUpVite = (node) =>\r\n\r\n\tnode.addDevDependency 'vite'\r\n\tnode.addDevDependency 'vite-plugin-top-level-await'\r\n\tnode.setField  'source', 'src/index.html'\r\n\tnode.addScript 'dev',    'concurrently \"llb -w\" \"vite -c src/vite.config.js src\"'\r\n\tnode.addScript 'build',  'llb && vite build'\r\n\tbarf \"\"\"\r\n\t\timport topLevelAwait from \"vite-plugin-top-level-await\";\r\n\r\n\t\texport default {\r\n\t\t\tbuild: {\r\n\t\t\t\ttarget: 'esnext'\r\n\t\t\t\t},\r\n\t\t\tplugins: [\r\n\t\t\t\ttopLevelAwait({\r\n\t\t\t\t\tpromiseExportName: \"__tla\",\r\n\t\t\t\t\tpromiseImportName: i => `__tla_${i}`\r\n\t\t\t\t\t})\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t\"\"\", \"./src/vite.config.js\"\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport setUpElectron = (node) =>\r\n\r\n\tnode.setField 'main', 'src/main.js'\r\n\tnode.addScript 'start', 'npm run build && electron .'\r\n\r\n\tconsole.log \"Installing (dev) \\\"electron\\\"\"\r\n\tnode.addDevDependency 'electron'\r\n\r\n\tconsole.log \"Creating src/main.coffee\"\r\n\tbarf \"\"\"\r\n\t\timport pathLib from 'node:path'\r\n\t\timport {app, BrowserWindow} from 'electron'\r\n\r\n\t\tapp.on 'ready', () =>\r\n\t\t\twin = new BrowserWindow({\r\n\t\t\t\twidth: 800,\r\n\t\t\t\theight: 600\r\n\t\t\t\twebPreferences: {\r\n\t\t\t\t\tnodeIntegration: true\r\n\t\t\t\t\tpreload: pathLib.join(import.meta.dirname, 'preload.js')\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t# --- win.loadFile('src/index.html')\r\n\t\t\twin.loadURL(\"file://#{import.meta.dirname}/index.html\")\r\n\t\t\t\"\"\", \"./src/main.coffee\"\r\n\r\n\t# ..........................................................\r\n\r\n\tconsole.log \"Creating src/index.html\"\r\n\tbarf \"\"\"\r\n\t\t<!DOCTYPE html>\r\n\t\t<html lang=\"en\">\r\n\t\t\t<head>\r\n\t\t\t\t<meta charset=\"UTF-8\">\r\n\t\t\t\t<!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP -->\r\n\t\t\t\t<meta http-equiv=\"Content-Security-Policy\" content=\"default-src 'self'; script-src 'self'\">\r\n\t\t\t\t<title>Electron App</title>\r\n\t\t\t</head>\r\n\t\t\t<body>\r\n\t\t\t\t<h1>Electron App, using:</h1>\r\n\t\t\t\t<p span id=\"node-version\">node-version</p>\r\n\t\t\t\t<p span id=\"chrome-version\">chrome-version</p>\r\n\t\t\t\t<p span id=\"electron-version\">electron-version</p>\r\n\t\t\t\tby <p id=\"myname\">My Name Here</p>\r\n\t\t\t\t<script src=\"./renderer.js\"></script>\r\n\t\t\t</body>\r\n\t\t</html>\r\n\t\t\"\"\", \"./src/index.html\"\r\n\r\n\t# ..........................................................\r\n\r\n\tconsole.log \"Creating src/preload.coffee\"\r\n\tbarf \"\"\"\r\n\t\t# --- preload.coffee has access to window,\r\n\t\t#     document and NodeJS globals\r\n\r\n\t\twindow.addEventListener 'DOMContentLoaded', () =>\r\n\t\t\treplaceText = (selector, text) =>\r\n\t\t\t\telem = document.getElementById(selector)\r\n\t\t\t\tif (elem)\r\n\t\t\t\t\telem.innerText = text\r\n\r\n\t\t\tfor dep in ['chrome','node','electron']\r\n\t\t\t\tstr = \"\\#{dep} version \\#{process.versions[dep]}\"\r\n\t\t\t\treplaceText \"\\#{dep}-version\", str\r\n\t\t\"\"\", \"./src/preload.coffee\"\r\n\r\n\t# ..........................................................\r\n\r\n\tconsole.log \"Creating src/renderer.coffee\"\r\n\tbarf \"\"\"\r\n\t\t# --- preload.coffee has access to window and document\r\n\r\n\t\telem = document.getElementById('myname')\r\n\t\tif elem\r\n\t\t\telem.innerText = '#{author}'\r\n\t\telse\r\n\t\t\tconsole.log \"No element with id 'myname'\"\r\n\t\t\"\"\", \"./src/renderer.coffee\"\r\n\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport setUpCodeMirror = (node) =>\r\n\r\n\treturn\r\n\r\n"
  ]
}