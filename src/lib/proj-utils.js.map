{
  "version": 3,
  "file": "proj-utils.js",
  "sourceRoot": "..\\..\\",
  "sources": [
    "src\\lib\\proj-utils.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "# proj-utils.coffee\r\n\r\nimport prompts from 'prompts'\r\n\r\nimport {\r\n\tundef, defined, notdefined, OL, getOptions,\r\n\tassert, croak, words, isEmpty, nonEmpty, hasKey\r\n\t} from '@jdeighan/llutils'\r\nimport {execCmd} from '@jdeighan/llutils/exec-utils'\r\nimport {BOX} from '@jdeighan/llutils/dump'\r\nimport {\r\n\tmkpath, isDir, mkDir, slurp, barf, clearDir,\r\n\tslurpJSON, barfJSON, slurpPkgJSON, barfPkgJSON,\r\n\ttouch, insertLinesAfter, fileExt,\r\n\t} from '@jdeighan/llutils/fs'\r\n\r\nexport lValidTypes = [\r\n\t'electron'\r\n\t'codemirror'\r\n\t'elm'\r\n\t'parcel'\r\n\t'vite'\r\n\t'none'\r\n\t]\r\ntype = 'none'\r\nsubtype = undef\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport checkIfInstalled = (...lCmds) =>\r\n\r\n\tfor cmd in lCmds\r\n\t\ttry\r\n\t\t\toutput = execCmd \"#{cmd} --version\"\r\n\t\t\treturn output\r\n\t\tcatch err\r\n\t\t\tconsole.log \"ERROR #{cmd} is not installed\"\r\n\t\t\tprocess.exit()\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport setProjType = (t, subt) =>\r\n\r\n\tif (t == 'website')\r\n\t\ttype = 'parcel'    # default web site type\r\n\tassert defined(t), \"type is undef\"\r\n\tassert lValidTypes.includes(t), \"Bad type: #{OL(t)}\"\r\n\ttype = t\r\n\tsubtype = if nonEmpty(subt) then subt else undef\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n# --- For example, isType('electron') will return true\r\n#     when type is 'codemirror'\r\n\r\nexport isOfType = (t) =>\r\n\r\n\tswitch t\r\n\t\twhen 'electron'\r\n\t\t\tlMembers = ['electron','codemirror']\r\n\t\twhen 'website'\r\n\t\t\tlMembers = ['parcel','vite']\r\n\t\telse\r\n\t\t\tlMembers = [t]\r\n\treturn lMembers.includes(type)\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport promptForProjType = () =>\r\n\r\n\thResponse = await prompts({\r\n\t\ttype: 'select'\r\n\t\tname: 'type'\r\n\t\tmessage: 'Which type of project?'\r\n\t\tchoices: [\r\n\t\t\t{\r\n\t\t\t\ttitle: 'Bare'\r\n\t\t\t\tdescription: 'Bare project'\r\n\t\t\t\tvalue: 'none'\r\n\t\t\t\t}\r\n\t\t\t{\r\n\t\t\t\ttitle: 'parcel'\r\n\t\t\t\tdescription: 'parcel web site'\r\n\t\t\t\tvalue: 'parcel'\r\n\t\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: 'vite'\r\n\t\t\t\tdescription: 'vite web site'\r\n\t\t\t\tvalue: 'vite'\r\n\t\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: 'electron'\r\n\t\t\t\tdescription: 'electron app'\r\n\t\t\t\tvalue: 'electron'\r\n\t\t\t\t}\r\n\t\t\t{\r\n\t\t\t\ttitle: 'codemirror'\r\n\t\t\t\tdescription: 'codeMirror editor'\r\n\t\t\t\tvalue: 'codemirror'\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t});\r\n\tsetProjType hResponse.type\r\n\treturn type\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport makeProjDir = (dirname, hOptions={}) =>\r\n\r\n\t{clear} = getOptions hOptions, {\r\n\t\tclear: false\r\n\t\t}\r\n\r\n\trootDir = process.env.PROJECT_ROOT_DIR\r\n\tif ! isDir(rootDir)\r\n\t\tconsole.log \"\"\"\r\n\t\t\tPlease set env var PROJECT_ROOT_DIR to a valid directory\r\n\t\t\t\"\"\"\r\n\t\tprocess.exit()\r\n\r\n\t# === Create the new directory and cd to it\r\n\r\n\tnewDir = mkpath(rootDir, dirname)\r\n\tif isDir(newDir)\r\n\t\tif clear\r\n\t\t\tconsole.log \"Directory #{OL(newDir)} exists, clearing it out\"\r\n\t\t\tclearDir newDir\r\n\t\telse\r\n\t\t\tconsole.log \"Directory #{OL(newDir)} already exists\"\r\n\t\t\tconsole.log \"Aborting...\"\r\n\t\t\tprocess.exit()\r\n\telse\r\n\t\tconsole.log \"Creating directory #{newDir}\"\r\n\t\tmkDir newDir\r\n\r\n\tprocess.chdir newDir\r\n\tmake_dirs()\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nmake_dirs = () =>\r\n\r\n\tconsole.log \"Making directories\"\r\n\tconsole.log \"   ./src\"\r\n\tmkDir './src'\r\n\r\n\tconsole.log \"   ./src/lib\"\r\n\tmkDir './src/lib'\r\n\r\n\tconsole.log \"   ./src/bin\"\r\n\tmkDir './src/bin'\r\n\r\n\tif isOfType('website')\r\n\t\tconsole.log \"   ./src/elements\"\r\n\t\tmkDir './src/elements'\r\n\r\n\tconsole.log \"   ./test\"\r\n\tmkDir './test'\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n# --- Used in bins addUserBin, addUserLib, addUserElement\r\n# ---------------------------------------------------------------------------\r\n# --- valFunc is a validation function\r\n#        return undef if valid\r\n#        else return error message\r\n\r\nexport promptForNames = (prompt, valFunc=undef) =>\r\n\r\n\tlNames = []\r\n\tloop\r\n\t\thResponse = await prompts {\r\n\t\t\ttype: 'text',\r\n\t\t\tname: 'name',\r\n\t\t\tmessage: prompt\r\n\t\t\t}\r\n\t\tname = hResponse.name\r\n\t\tif name\r\n\t\t\tif validFunc && (msg = validFunc(name))\r\n\t\t\t\tconsole.log msg\r\n\t\t\telse\r\n\t\t\t\tlNames.push name\r\n\t\telse\r\n\t\t\treturn lNames\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport typeSpecificSetup = (nodeEnv) =>\r\n\r\n\tif isOfType('website')\r\n\t\tsetUpWebSite(nodeEnv)\r\n\tif isOfType('elm')\r\n\t\tsetUpElm(nodeEnv)\r\n\tif isOfType('parcel')\r\n\t\tsetUpParcel(nodeEnv)\r\n\tif isOfType('vite')\r\n\t\tsetUpVite(nodeEnv)\r\n\tif isOfType('electron')\r\n\t\tsetUpElectron(nodeEnv)\r\n\tif isOfType('codemirror')\r\n\t\tsetUpCodeMirror(nodeEnv)\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nsetUpWebSite = (nodeEnv) =>\r\n\r\n\tnodeEnv.addDevDependency 'svelte'\r\n\r\n\tconsole.log \"Creating src/index.html\"\r\n\tbarf \"\"\"\r\n\t\t<!DOCTYPE html>\r\n\t\t<html lang=\"en\">\r\n\t\t\t<head>\r\n\t\t\t\t<meta charset=\"utf-8\">\r\n\t\t\t\t<title>Web Site</title>\r\n\t\t\t</head>\r\n\t\t\t<body>\r\n\t\t\t\t<h1>Hello, World!</h1>\r\n\t\t\t\t<script type=\"module\">\r\n\t\t\t\t\timport './main.js';\r\n\t\t\t\t\t// --- Custom Element Imports\r\n\t\t\t\t</script>\r\n\t\t\t</body>\r\n\t\t</html>\r\n\t\t\"\"\", \"./src/index.html\"\r\n\r\n\tbarf \"\"\"\r\n\t\t# --- main.coffee\r\n\r\n\t\timport {escapeStr} from '@jdeighan/llutils'\r\n\t\tconsole.log escapeStr(\"\\t\\tabc\\r\\n\")\r\n\t\t\"\"\", \"./src/main.coffee\"\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport importCustomElement = (name) =>\r\n\r\n\tinsertLinesAfter(\r\n\t\t\"./src/main.coffee\",\r\n\t\t/Custom Element Imports/,\r\n\t\t\"\\t\\t\\timport ./elements/#{name}.js\"\r\n\t\t)\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nsetUpElm = (nodeEnv) =>\r\n\r\n\tcheckIfInstalled 'elm'\r\n\r\n\tconsole.log \"setUpElm(): subtype = #{OL(subtype)}\"\r\n\r\n\tnodeEnv.addDevDependency 'svelte'\r\n\tnodeEnv.addDevDependency 'elm-live'\r\n\r\n\tnodeEnv.addScript 'build',  \"npm run build:coffee && elm make src/Main.elm --output=main.js\"\r\n\tnodeEnv.addScript 'dev',    \"elm-live src/Main.elm -- --debug --output=main.js\"\r\n\r\n\tnodeEnv.addFile \"./elm.json\", \"\"\"\r\n\t\t{\r\n\t\t\t\"type\": \"application\",\r\n\t\t\t\"source-directories\": [\r\n\t\t\t\t\"src\"\r\n\t\t\t],\r\n\t\t\t\"elm-version\": \"0.19.1\",\r\n\t\t\t\"dependencies\": {\r\n\t\t\t\t\t\"direct\": {\r\n\t\t\t\t\t\t\"elm/browser\": \"1.0.2\",\r\n\t\t\t\t\t\t\"elm/core\": \"1.0.5\",\r\n\t\t\t\t\t\t\"elm/html\": \"1.0.0\",\r\n\t\t\t\t\t\t\"elm/http\": \"2.0.0\",\r\n\t\t\t\t\t\t\"elm/json\": \"1.1.3\",\r\n\t\t\t\t\t\t\"elm/svg\": \"1.0.1\",\r\n\t\t\t\t\t\t\"elm/url\": \"1.0.0\",\r\n\t\t\t\t\t\t\"krisajenkins/remotedata\": \"6.0.1\",\r\n\t\t\t\t\t\t\"mdgriffith/elm-ui\": \"1.1.8\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"indirect\": {\r\n\t\t\t\t\t\t\"elm/bytes\": \"1.0.8\",\r\n\t\t\t\t\t\t\"elm/file\": \"1.0.5\",\r\n\t\t\t\t\t\t\"elm/time\": \"1.0.0\",\r\n\t\t\t\t\t\t\"elm/url\": \"1.0.0\",\r\n\t\t\t\t\t\t\"elm/virtual-dom\": \"1.0.3\"\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\"test-dependencies\": {\r\n\t\t\t\t\"direct\": {},\r\n\t\t\t\t\"indirect\": {}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\t\"\"\".replaceAll(\"\\t\", \"   \")\r\n\r\n\tnodeEnv.addFile \"./index.html\",  \"\"\"\r\n\t\t<!DOCTYPE html>\r\n\t\t<html lang=\"en\">\r\n\t\t<head>\r\n\t\t\t<meta charset=\"utf-8\">\r\n\t\t\t<meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\r\n\t\t\t<meta name=\"viewport\" content=\"width=device-width\">\r\n\t\t\t<title>Elm Web Site</title>\r\n\t\t\t<script src=\"main.js\"></script>\r\n\t\t</head>\r\n\r\n\t\t<body>\r\n\t\t\t<main></main>\r\n\t\t\t<script>\r\n\t\t\t\tElm.Main.init({\r\n\t\t\t\t\tnode: document.querySelector('main')\r\n\t\t\t\t\t});\r\n\t\t\t</script>\r\n\t\t</body>\r\n\t\t</html>\r\n\t\t\"\"\"\r\n\r\n\tif (subtype == 'dog')\r\n\t\tconsole.log \"Creating elm site 'dog'\"\r\n\t\tnodeEnv.addFile \"./src/Main.elm\", \"\"\"\r\n\t\t\tmodule Main exposing (main)\r\n\r\n\t\t\timport Browser\r\n\t\t\timport Element exposing(\r\n\t\t\t\tlayoutWith, text, paragraph, column, image,\r\n\t\t\t\twidth, fill, rgb255, padding, paddingXY,\r\n\t\t\t\tmaximum, centerX\r\n\t\t\t\t)\r\n\t\t\timport Element.Font exposing(bold)\r\n\t\t\timport Element.Background\r\n\r\n\t\t\tfontColor = Element.Font.color\r\n\t\t\tfontSize = Element.Font.size\r\n\t\t\tbkgColor = Element.Background.color\r\n\r\n\t\t\tcolor = {\r\n\t\t\t\tblue = rgb255 100 100 200,\r\n\t\t\t\tlightGray = rgb255 180 180 180\r\n\t\t\t\t}\r\n\r\n\t\t\tmain = Browser.sandbox {\r\n\t\t\t\tinit = 0,\r\n\t\t\t\tview = vLayout,\r\n\t\t\t\tupdate = update\r\n\t\t\t\t}\r\n\r\n\t\t\tupdate msg model = model\r\n\r\n\t\t\tvLayout model = layoutWith {\r\n\t\t\t\toptions = []\r\n\t\t\t\t}\r\n\t\t\t\t[\r\n\t\t\t\t\tbkgColor color.lightGray,\r\n\t\t\t\t\tpadding 22\r\n\t\t\t\t\t]\r\n\t\t\t\t( column [] [\r\n\t\t\t\t\tvTitle,\r\n\t\t\t\t\tvSubtitle,\r\n\t\t\t\t\tvDog\r\n\t\t\t\t\t])\r\n\r\n\t\t\tvTitle = paragraph\r\n\t\t\t\t[\r\n\t\t\t\t\tbold,\r\n\t\t\t\t\tfontColor color.blue,\r\n\t\t\t\t\tfontSize 48,\r\n\t\t\t\t\tpaddingXY 0 20\r\n\t\t\t\t\t]\r\n\t\t\t\t[text \"My Awesome Dog\"]\r\n\r\n\t\t\tvSubtitle = paragraph [padding 5] [\r\n\t\t\t\ttext \"A web page for my dog\"\r\n\t\t\t\t]\r\n\r\n\t\t\tvDog = image\r\n\t\t\t\t[\r\n\t\t\t\t\twidth (maximum 300 fill),\r\n\t\t\t\t\tcenterX\r\n\t\t\t\t\t]\r\n\t\t\t\t{\r\n\t\t\t\t\tsrc = \"dog.jpg\",\r\n\t\t\t\t\tdescription = \"a picture of my dog\"\r\n\t\t\t\t\t}\r\n\t\t\t\"\"\"\r\n\telse if (subtype == 'json')\r\n\t\tconsole.log \"Creating elm site 'json'\"\r\n\t\tnodeEnv.addFile \"./src/Main.elm\", \"\"\"\r\n\t\t\tmodule Main exposing (..)\r\n\r\n\t\t\timport Browser exposing(element)\r\n\t\t\timport Html exposing(text)\r\n\t\t\timport Http\r\n\t\t\timport Json.Decode\r\n\t\t\timport RemoteData exposing (RemoteData)\r\n\r\n\r\n\t\t\tmain : Program () Model Msg\r\n\t\t\tmain =\r\n\t\t\t\telement\r\n\t\t\t\t\t{ init = initModel\r\n\t\t\t\t\t, view = view\r\n\t\t\t\t\t, update = update\r\n\t\t\t\t\t, subscriptions = subscriptions\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\tinitModel : () -> ( Model, Cmd Msg )\r\n\t\t\tinitModel _ =\r\n\t\t\t\t( { result = RemoteData.NotAsked }, getTitle )\r\n\r\n\r\n\t\t\tview : Model -> Html.Html msg\r\n\t\t\tview model =\r\n\t\t\t\tcase model.result of\r\n\t\t\t\t\tRemoteData.Failure error ->\r\n\t\t\t\t\t\ttext (getErrorMessage error)\r\n\r\n\t\t\t\t\tRemoteData.Success title ->\r\n\t\t\t\t\t\ttext title\r\n\r\n\t\t\t\t\tRemoteData.Loading ->\r\n\t\t\t\t\t\ttext \"Loading ...\"\r\n\r\n\t\t\t\t\tRemoteData.NotAsked ->\r\n\t\t\t\t\t\ttext \"Where everything starts\"\r\n\r\n\r\n\t\t\tupdate : Msg -> Model -> ( Model, Cmd Msg )\r\n\t\t\tupdate msg model =\r\n\t\t\t\tcase msg of\r\n\t\t\t\t\tMsgGotTitle result ->\r\n\t\t\t\t\t\t( { model | result = result }, Cmd.none )\r\n\r\n\r\n\t\t\tgetErrorMessage errorDetail =\r\n\t\t\t\tcase errorDetail of\r\n\t\t\t\t\tHttp.NetworkError ->\r\n\t\t\t\t\t\t\"Connection error\"\r\n\r\n\t\t\t\t\tHttp.BadStatus errorStatus ->\r\n\t\t\t\t\t\t\"Invalid server response \" ++ String.fromInt errorStatus\r\n\r\n\t\t\t\t\tHttp.Timeout ->\r\n\t\t\t\t\t\t\"Request time out\"\r\n\r\n\t\t\t\t\tHttp.BadUrl reasonError ->\r\n\t\t\t\t\t\t\"Invalid request URL \" ++ reasonError\r\n\r\n\t\t\t\t\tHttp.BadBody invalidData ->\r\n\t\t\t\t\t\t\"Invalid data \" ++ invalidData\r\n\r\n\r\n\t\t\tsubscriptions : Model -> Sub msg\r\n\t\t\tsubscriptions _ =\r\n\t\t\t\tSub.none\r\n\r\n\r\n\t\t\ttype alias Model =\r\n\t\t\t\t{ result : RemoteData Http.Error String\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\ttype Msg\r\n\t\t\t\t= MsgGotTitle (RemoteData Http.Error String)\r\n\r\n\r\n\t\t\tgetTitle : Cmd Msg\r\n\t\t\tgetTitle =\r\n\t\t\t\tHttp.get\r\n\t\t\t\t\t{ url = \"https://jsonplaceholder.typicode.com/posts/2\"\r\n\t\t\t\t\t, expect = Http.expectJson upgradeToRemoteData dataTitleDecoder\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\tupgradeToRemoteData result =\r\n\t\t\t\tMsgGotTitle (RemoteData.fromResult result)\r\n\r\n\r\n\t\t\tdataTitleDecoder : Json.Decode.Decoder String\r\n\t\t\tdataTitleDecoder =\r\n\t\t\t\tJson.Decode.field \"title\" Json.Decode.string\r\n\t\t\"\"\"\r\n\telse\r\n\t\tconsole.log \"Creating bare elm site\"\r\n\t\tnodeEnv.addFile \"./src/Main.elm\", \"\"\"\r\n\t\t\tmodule Main exposing (main)\r\n\r\n\t\t\timport Browser exposing(sandbox)\r\n\t\t\timport Html exposing(Html)\r\n\t\t\timport Element exposing(..)\r\n\r\n\t\t\tmain = sandbox {\r\n\t\t\t\t init = {\r\n\t\t\t\t\t  title = \"Hello\"\r\n\t\t\t\t\t  },\r\n\t\t\t\tview = \\\\model -> layout [] (text model.title),\r\n\t\t\t\tupdate = \\\\msg -> \\\\model -> model\r\n\t\t\t\t}\r\n\r\n\t\t\t\"\"\"\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nsetUpParcel = (nodeEnv) =>\r\n\r\n\tnodeEnv.addDevDependency 'parcel'\r\n\tnodeEnv.setField  'source', 'src/index.html'\r\n\tnodeEnv.addScript 'dev',    'concurrently --kill-others \"llb -w\" \"parcel\"'\r\n\tnodeEnv.addScript 'build',  'llb && parcel build'\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nsetUpVite = (nodeEnv) =>\r\n\r\n\tnodeEnv.addDevDependency 'vite'\r\n\tnodeEnv.addDevDependency 'vite-plugin-top-level-await'\r\n\tnodeEnv.setField  'source', 'src/index.html'\r\n\tnodeEnv.addScript 'dev',    'concurrently --kill-others \"llb -w\" \"vite -c src/vite.config.js src\"'\r\n\tnodeEnv.addScript 'build',  'llb && vite build'\r\n\tbarf \"\"\"\r\n\t\timport topLevelAwait from \"vite-plugin-top-level-await\";\r\n\r\n\t\texport default {\r\n\t\t\tbuild: {\r\n\t\t\t\ttarget: 'esnext'\r\n\t\t\t\t},\r\n\t\t\tplugins: [\r\n\t\t\t\ttopLevelAwait({\r\n\t\t\t\t\tpromiseExportName: \"__tla\",\r\n\t\t\t\t\tpromiseImportName: i => `__tla_${i}`\r\n\t\t\t\t\t})\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t\"\"\", \"./src/vite.config.js\"\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nsetUpElectron = (nodeEnv) =>\r\n\r\n\tnodeEnv.setField 'main', 'src/main.js'\r\n\tnodeEnv.addScript 'start', 'npm run build && electron .'\r\n\r\n\tconsole.log \"Installing (dev) \\\"electron\\\"\"\r\n\tnodeEnv.addDevDependency 'electron'\r\n\r\n\tconsole.log \"Creating src/main.coffee\"\r\n\tbarf \"\"\"\r\n\t\timport pathLib from 'node:path'\r\n\t\timport {app, BrowserWindow} from 'electron'\r\n\r\n\t\tapp.on 'ready', () =>\r\n\t\t\twin = new BrowserWindow({\r\n\t\t\t\twidth: 800,\r\n\t\t\t\theight: 600\r\n\t\t\t\twebPreferences: {\r\n\t\t\t\t\tnodeIntegration: true\r\n\t\t\t\t\tpreload: pathLib.join(import.meta.dirname, 'preload.js')\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t# --- win.loadFile('src/index.html')\r\n\t\t\twin.loadURL(\"file://#{import.meta.dirname}/index.html\")\r\n\t\t\t\"\"\", \"./src/main.coffee\"\r\n\r\n\t# ..........................................................\r\n\r\n\tconsole.log \"Creating src/index.html\"\r\n\tbarf \"\"\"\r\n\t\t<!DOCTYPE html>\r\n\t\t<html lang=\"en\">\r\n\t\t\t<head>\r\n\t\t\t\t<meta charset=\"UTF-8\">\r\n\t\t\t\t<!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP -->\r\n\t\t\t\t<meta http-equiv=\"Content-Security-Policy\" content=\"default-src 'self'; script-src 'self'\">\r\n\t\t\t\t<title>Electron App</title>\r\n\t\t\t</head>\r\n\t\t\t<body>\r\n\t\t\t\t<h1>Electron App, using:</h1>\r\n\t\t\t\t<p span id=\"node-version\">node-version</p>\r\n\t\t\t\t<p span id=\"chrome-version\">chrome-version</p>\r\n\t\t\t\t<p span id=\"electron-version\">electron-version</p>\r\n\t\t\t\tby <p id=\"myname\">My Name Here</p>\r\n\t\t\t\t<script src=\"./renderer.js\"></script>\r\n\t\t\t</body>\r\n\t\t</html>\r\n\t\t\"\"\", \"./src/index.html\"\r\n\r\n\t# ..........................................................\r\n\r\n\tconsole.log \"Creating src/preload.coffee\"\r\n\tbarf \"\"\"\r\n\t\t# --- preload.coffee has access to window,\r\n\t\t#     document and NodeJS globals\r\n\r\n\t\twindow.addEventListener 'DOMContentLoaded', () =>\r\n\t\t\treplaceText = (selector, text) =>\r\n\t\t\t\telem = document.getElementById(selector)\r\n\t\t\t\tif (elem)\r\n\t\t\t\t\telem.innerText = text\r\n\r\n\t\t\tfor dep in ['chrome','node','electron']\r\n\t\t\t\tstr = \"\\#{dep} version \\#{process.versions[dep]}\"\r\n\t\t\t\treplaceText \"\\#{dep}-version\", str\r\n\t\t\"\"\", \"./src/preload.coffee\"\r\n\r\n\t# ..........................................................\r\n\r\n\tconsole.log \"Creating src/renderer.coffee\"\r\n\tbarf \"\"\"\r\n\t\t# --- preload.coffee has access to window and document\r\n\r\n\t\telem = document.getElementById('myname')\r\n\t\tif elem\r\n\t\t\telem.innerText = '#{author}'\r\n\t\telse\r\n\t\t\tconsole.log \"No element with id 'myname'\"\r\n\t\t\"\"\", \"./src/renderer.coffee\"\r\n\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nsetUpCodeMirror = (nodeEnv) =>\r\n\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n# --- 1. Read in current package.json\r\n#     2. If option 'fix':\r\n#        - get keys from env var PROJECT_PACKAGE_JSON\r\n#        - overwrite keys in package.json\r\n#        - adjust name if env var PROJECT_NAME_PREFIX is set\r\n\r\nexport class NodeEnv\r\n\r\n\tconstructor: (hOptions={}) ->\r\n\r\n\t\t{fixPkgJson, echo: @echo} = getOptions hOptions, {\r\n\t\t\tfixPkgJson: false\r\n\t\t\techo: true\r\n\t\t\t}\r\n\t\t@hJson = slurpPkgJSON()\r\n\t\tif fixPkgJson\r\n\t\t\t@mergeKeysFromEnv()\r\n\t\t\tprefix = process.env.PROJECT_NAME_PREFIX\r\n\t\t\tif nonEmpty(prefix) && ! @hJson.name.startsWith(prefix)\r\n\t\t\t\t@setField 'name', \"#{prefix}#{@hJson.name}\"\r\n\t\t\t@setField 'license', 'MIT'\r\n\r\n\t# ..........................................................\r\n\r\n\tmergeKeysFromEnv: () ->\r\n\r\n\t\tpkgJson = process.env.PROJECT_PACKAGE_JSON\r\n\t\tif nonEmpty(pkgJson)\r\n\t\t\t# --- Can be either a JSON string or a file path\r\n\t\t\tif (pkgJson.indexOf('{') == 0)\r\n\t\t\t\thSetKeys = JSON.parse(pkgJson)\r\n\t\t\telse\r\n\t\t\t\thSetKeys = slurpJSON(pkgJson)\r\n\t\t\tObject.assign @hJson, hSetKeys\r\n\t\treturn\r\n\r\n\t# ..........................................................\r\n\r\n\tname: () ->\r\n\r\n\t\treturn @hJson.name\r\n\r\n\t# ..........................................................\r\n\r\n\tgetField: (name) ->\r\n\r\n\t\treturn @hJson[name]\r\n\r\n\t# ..........................................................\r\n\r\n\tsetField: (name, value) ->\r\n\r\n\t\t@hJson[name] = value\r\n\t\tif @echo\r\n\t\t\tconsole.log \"   SET #{name} = #{OL(value)}\"\r\n\t\treturn\r\n\r\n\t# ..........................................................\r\n\r\n\taddScript: (name, str) ->\r\n\r\n\t\tif ! hasKey(@hJson, 'scripts')\r\n\t\t\t@hJson.scripts = {}\r\n\t\t@hJson.scripts[name] = str\r\n\t\tif @echo\r\n\t\t\tconsole.log \"   ADD SCRIPT #{name} = #{OL(str)}\"\r\n\t\treturn\r\n\r\n\t# ..........................................................\r\n\r\n\taddExport: (name, str) ->\r\n\r\n\t\tif ! hasKey(@hJson, 'exports')\r\n\t\t\t@hJson.exports = {}\r\n\t\t@hJson.exports[name] = str\r\n\t\tif @echo\r\n\t\t\tconsole.log \"   ADD EXPORT #{name} = #{OL(str)}\"\r\n\t\treturn\r\n\r\n\t# ..........................................................\r\n\r\n\taddUserBin: (name) ->\r\n\r\n\t\tbarf \"\"\"\r\n\t\t\t# --- #{name}.coffee\r\n\r\n\r\n\t\t\t\"\"\", \"./src/bin/#{name}.coffee\"\r\n\r\n\t\tif ! hasKey(@hJson, 'bin')\r\n\t\t\t@hJson.bin = {}\r\n\t\t@hJson.bin[name] = \"./src/bin/#{name}.js\"\r\n\t\tif @echo\r\n\t\t\tconsole.log \"   ADD BIN #{name}\"\r\n\t\treturn\r\n\r\n\t# ..........................................................\r\n\r\n\taddUserLib: (name) ->\r\n\r\n\t\tbarf \"\"\"\r\n\t\t\t# --- #{name}.coffee\r\n\r\n\r\n\t\t\t\"\"\", \"./src/lib/#{name}.coffee\"\r\n\r\n\t\t# --- Add a unit test\r\n\t\tbarf \"\"\"\r\n\t\t\t# --- #{name}.test.offee\r\n\r\n\t\t\timport * as lib from './#{name}'\r\n\t\t\tObject.assign(global, lib)\r\n\t\t\timport * as lib2 from '@jdeighan/llutils/utest'\r\n\t\t\tObject.assign(global, lib2)\r\n\r\n\t\t\tequal 2+2, 4\r\n\t\t\t\"\"\", \"./test/#{name}.test.coffee\"\r\n\r\n\t\t@addExport \"./#{name}\", \"./src/lib/#{name}.js\"\r\n\r\n\t\tif ! hasKey(@hJson, 'bin')\r\n\t\t\t@hJson.bin = {}\r\n\t\t@hJson.bin[name] = \"./src/bin/#{name}.js\"\r\n\t\tif @echo\r\n\t\t\tconsole.log \"   ADD BIN #{name}\"\r\n\t\treturn\r\n\r\n\t# ..........................................................\r\n\r\n\taddUserElement: (name) ->\r\n\r\n\t\tbarf \"\"\"\r\n\t\t\t<!-- #{name}.svelte -->\r\n\t\t\t<svelte:options customElement=\"#{name}\" />\r\n\t\t\t<p>A new element</p>\r\n\r\n\t\t\t\"\"\", \"./src/elements/#{name}.svelte\"\r\n\r\n\t\t@addExport \"./#{name}\", \"./src/elements/#{name}.js\"\r\n\t\tif @echo\r\n\t\t\tconsole.log \"   ADD ELEMENT #{name}\"\r\n\t\treturn\r\n\r\n\t# ..........................................................\r\n\r\n\thasDep: (pkg) ->\r\n\r\n\t\tif hasKey(@hJson, 'dependencies')\r\n\t\t\treturn hasKey(@hJson.dependencies, pkg)\r\n\t\telse\r\n\t\t\treturn false\r\n\r\n\t# ..........................................................\r\n\r\n\thasDevDep: (pkg) ->\r\n\r\n\t\tif hasKey(@hJson, 'devDependencies')\r\n\t\t\treturn hasKey(@hJson.devDependencies, pkg)\r\n\t\telse\r\n\t\t\treturn false\r\n\r\n\t# ..........................................................\r\n\r\n\tremoveDep: (pkg) ->\r\n\r\n\t\tif @hasDep(pkg)\r\n\t\t\tdelete @hJson.dependencies[pkg]\r\n\t\tif @hasDevDep(pkg)\r\n\t\t\tdelete @hJson.devDependencies[pkg]\r\n\t\treturn\r\n\r\n\t# ..........................................................\r\n\r\n\taddDependency: (pkg) ->\r\n\r\n\t\tif ! hasKey(@hJson, 'dependencies')\r\n\t\t\t@hJson.dependencies = {}\r\n\t\t@removeDep pkg\r\n\t\tversion = getVersion(pkg)\r\n\t\t@hJson.dependencies[pkg] = version\r\n\t\tif @echo\r\n\t\t\tconsole.log \"   DEP #{pkg} = #{OL(version)}\"\r\n\t\treturn\r\n\r\n\t# ..........................................................\r\n\r\n\taddDevDependency: (pkg) ->\r\n\r\n\t\tif ! hasKey(@hJson, 'devDependencies')\r\n\t\t\t@hJson.devDependencies = {}\r\n\t\t@removeDep pkg\r\n\t\tversion = getVersion(pkg)\r\n\t\t@hJson.devDependencies[pkg] = version\r\n\t\tif @echo\r\n\t\t\tconsole.log \"   DEV DEP #{pkg} = #{OL(version)}\"\r\n\t\treturn\r\n\r\n\t# ..........................................................\r\n\r\n\tisInstalled: (pkg) ->\r\n\r\n\t\treturn hasKey(@hJson.dependencies, pkg) \\\r\n\t\t\t\t|| hasKey(@hJson.devDependencies, pkg)\r\n\r\n\t# ..........................................................\r\n\r\n\twrite_pkg_json: () ->\r\n\r\n\t\t@addExport \"./package.json\", \"./package.json\"\r\n\t\tbarfPkgJSON @hJson\r\n\t\treturn\r\n\r\n\t# ..........................................................\r\n\r\n\taddFile: (fileName, contents=undef) ->\r\n\r\n\t\tif @echo\r\n\t\t\tconsole.log \"ADD FILE #{OL(fileName)}\"\r\n\r\n\t\tif defined(contents)\r\n\t\t\tif (fileExt(fileName) == '.elm')\r\n\t\t\t\tcontents = contents.replaceAll(\"\\t\", \"   \")\r\n\t\t\tbarf contents, fileName\r\n\t\t\treturn\r\n\r\n\t\tswitch fileName\r\n\r\n\t\t\twhen 'README.md'\r\n\t\t\t\tbarf contents || \"\"\"\r\n\t\t\t\t\tREADME.md file\r\n\t\t\t\t\t==============\r\n\r\n\r\n\t\t\t\t\t\"\"\", \"./README.md\"\r\n\r\n\t\t\twhen '.gitignore'\r\n\t\t\t\tbarf contents || \"\"\"\r\n\t\t\t\t\tlogs/\r\n\t\t\t\t\tnode_modules/\r\n\t\t\t\t\ttypings/\r\n\t\t\t\t\t*.tsbuildinfo\r\n\t\t\t\t\t.npmrc\r\n\t\t\t\t\t/build\r\n\t\t\t\t\t/public\r\n\t\t\t\t\t/dist\r\n\r\n\t\t\t\t\t# dotenv environment variables file\r\n\t\t\t\t\t.env\r\n\t\t\t\t\t.env.test\r\n\r\n\t\t\t\t\ttest/temp*.*\r\n\t\t\t\t\t/.svelte-kit\r\n\t\t\t\t\t\"\"\", \"./.gitignore\"\r\n\r\n\t\t\twhen '.npmrc'\r\n\t\t\t\tbarf contents || \"\"\"\r\n\t\t\t\t\tengine-strict=true\r\n\t\t\t\t\t# --- loglevel can be silent or warn\r\n\t\t\t\t\tloglevel=silent\r\n\t\t\t\t\t\"\"\", \"./.npmrc\"\r\n\r\n\t\t\telse\r\n\t\t\t\tcroak \"addFile #{OL(fileName)} not implemented\"\r\n\t\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\ngetVersion = (pkg) =>\r\n\r\n\tswitch pkg\r\n\t\twhen 'coffeescript'\r\n\t\t\treturn \"^2.7.0\"\r\n\t\twhen 'concurrently'\r\n\t\t\treturn \"^8.2.2\"\r\n\t\twhen 'ava'\r\n\t\t\treturn \"^6.1.3\"\r\n\t\twhen 'svelte'\r\n\t\t\treturn \"^5.0.0-next.200\"\r\n\t\twhen 'gulp'\r\n\t\t\treturn \"^5.0.0\"\r\n\t\twhen 'parcel'\r\n\t\t\treturn \"^2.12.0\"\r\n\t\twhen 'vite'\r\n\t\t\treturn \"^5.4.0\"\r\n\t\twhen 'elm-live'\r\n\t\t\treturn \"^4.0.2\"\r\n\t\twhen 'vite-plugin-top-level-await'\r\n\t\t\treturn \"^1.4.3\"\r\n\t\telse\r\n\t\t\treturn '*'\r\n"
  ]
}