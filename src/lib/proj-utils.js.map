{
  "version": 3,
  "file": "proj-utils.js",
  "sourceRoot": "..\\..\\",
  "sources": [
    "src\\lib\\proj-utils.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "# proj-utils.coffee\r\n\r\nimport prompts from 'prompts'\r\n\r\nimport {\r\n\tundef, defined, notdefined, OL, getOptions,\r\n\tassert, execCmd, words,\r\n\t} from '@jdeighan/llutils'\r\nimport {BOX} from '@jdeighan/llutils/dump'\r\nimport {\r\n\tmkpath, isDir, mkDir, slurp, barf, clearDir,\r\n\tslurpJSON, barfJSON, barfPkgJSON, touch,\r\n\t} from '@jdeighan/llutils/fs'\r\n\r\n# --- type 'website' will change to 'parcel' for now\r\nlValidTypes = words('electron codemirror parcel vite none')\r\ntype = undef\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport checkInstall = (cmd) =>\r\n\r\n\ttry\r\n\t\toutput = execCmd \"#{cmd} --version\"\r\n\t\treturn output\r\n\tcatch err\r\n\t\tconsole.log \"ERROR #{cmd} is not installed\"\r\n\t\tprocess.exit()\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport setProjType = (t) =>\r\n\r\n\tif (t == 'vite')\r\n\t\tconsole.log \"Type 'vite' not implemented yet\"\r\n\t\tprocess.exit()\r\n\tassert defined(t), \"type is undef\"\r\n\ttype = t\r\n\tassert lValidTypes.includes(type), \"Bad type: #{OL(type)}\"\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n# --- For example, isType('electron') will return true\r\n#     when type is 'codemirror'\r\n\r\nexport isOfType = (t) =>\r\n\r\n\tswitch t\r\n\t\twhen 'parcel'\r\n\t\t\treturn (type == 'parcel')\r\n\t\twhen 'electron'\r\n\t\t\treturn (type == 'electron') || (type == 'codemirror')\r\n\t\twhen 'codemirror'\r\n\t\t\treturn (type == 'codemirror')\r\n\t\twhen 'website'\r\n\t\t\treturn (type == 'parcel') || (type == 'vite')\r\n\t\telse\r\n\t\t\treturn false\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport promptForProjType = () =>\r\n\r\n\thResponse = await prompts({\r\n\t\ttype: 'select'\r\n\t\tname: 'type'\r\n\t\tmessage: 'Which type of project?'\r\n\t\tchoices: [\r\n\t\t\t{\r\n\t\t\t\ttitle: 'Bare'\r\n\t\t\t\tdescription: 'Bare project'\r\n\t\t\t\tvalue: 'none'\r\n\t\t\t\t}\r\n\t\t\t{\r\n\t\t\t\ttitle: 'parcel'\r\n\t\t\t\tdescription: 'parcel web site'\r\n\t\t\t\tvalue: 'parcel'\r\n\t\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: 'vite'\r\n\t\t\t\tdescription: 'vite web site'\r\n\t\t\t\tvalue: 'vite'\r\n\t\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: 'electron'\r\n\t\t\t\tdescription: 'electron app'\r\n\t\t\t\tvalue: 'electron'\r\n\t\t\t\t}\r\n\t\t\t{\r\n\t\t\t\ttitle: 'codemirror'\r\n\t\t\t\tdescription: 'codeMirror editor'\r\n\t\t\t\tvalue: 'codemirror'\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t});\r\n\tsetProjType hResponse.type\r\n\treturn type\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport makeProjDir = (dirname, hOptions={}) =>\r\n\r\n\t{clear} = getOptions hOptions, {\r\n\t\tclear: false\r\n\t\t}\r\n\r\n\trootDir = process.env.PROJECT_ROOT_DIR\r\n\tif ! isDir(rootDir)\r\n\t\tconsole.log \"\"\"\r\n\t\t\tPlease set env var PROJECT_ROOT_DIR to a valid directory\r\n\t\t\t\"\"\"\r\n\t\tprocess.exit()\r\n\r\n\t# === Create the new directory and cd to it\r\n\r\n\tnewDir = mkpath(rootDir, dirname)\r\n\tif isDir(newDir)\r\n\t\tif clear\r\n\t\t\tconsole.log \"Directory #{OL(newDir)} exists, clearing it out\"\r\n\t\t\tclearDir newDir\r\n\t\telse\r\n\t\t\tconsole.log \"Directory #{OL(newDir)} already exists\"\r\n\t\t\tconsole.log \"Aborting...\"\r\n\t\t\tprocess.exit()\r\n\telse\r\n\t\tconsole.log \"Creating directory #{newDir}\"\r\n\t\tmkDir newDir\r\n\r\n\tprocess.chdir newDir\r\n\tmake_dirs()\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nmake_dirs = () =>\r\n\r\n\tconsole.log \"Making directories\"\r\n\tconsole.log \"   ./src\"\r\n\tmkDir './src'\r\n\r\n\tconsole.log \"   ./src/lib\"\r\n\tmkDir './src/lib'\r\n\r\n\tconsole.log \"   ./src/bin\"\r\n\tmkDir './src/bin'\r\n\r\n\tif isOfType('website')\r\n\t\tconsole.log \"   ./src/elements\"\r\n\t\tmkDir './src/elements'\r\n\r\n\tconsole.log \"   ./test\"\r\n\tmkDir './test'\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n# --- Used in bins addUserBin, addUserLib, addUserElement\r\n# ---------------------------------------------------------------------------\r\n# --- valFunc is a validation function\r\n#        return undef if valid\r\n#        else return error message\r\n\r\nexport promptForNames = (prompt, valFunc=undef) =>\r\n\r\n\tlNames = []\r\n\tloop\r\n\t\thResponse = await prompts {\r\n\t\t\ttype: 'text',\r\n\t\t\tname: 'name',\r\n\t\t\tmessage: prompt\r\n\t\t\t}\r\n\t\tname = hResponse.name\r\n\t\tif name\r\n\t\t\tif validFunc && (msg = validFunc(name))\r\n\t\t\t\tconsole.log msg\r\n\t\t\telse\r\n\t\t\t\tlNames.push name\r\n\t\telse\r\n\t\t\treturn lNames\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport typeSpecificSetup = (node) =>\r\n\r\n\tif isOfType('website')\r\n\t\tsetUpWebSite(node)\r\n\tif isOfType('parcel')\r\n\t\tsetUpParcel(node)\r\n\tif isOfType('electron')\r\n\t\tsetUpElectron(node)\r\n\tif isOfType('codemirror')\r\n\t\tsetUpCodeMirror(node)\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport setUpWebSite = (node) =>\r\n\r\n\tconsole.log \"Creating src/index.html\"\r\n\tbarf \"\"\"\r\n\t\t<!DOCTYPE html>\r\n\t\t<html lang=\"en\">\r\n\t\t\t<head>\r\n\t\t\t\t<meta charset=\"utf-8\">\r\n\t\t\t\t<title>Parcel App</title>\r\n\t\t\t</head>\r\n\t\t\t<body>\r\n\t\t\t\t<h1>Hello, World!</h1>\r\n\t\t\t</body>\r\n\t\t</html>\r\n\t\t\"\"\", \"./src/index.html\"\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport setUpParcel = (node) =>\r\n\r\n\tnode.addDevDependency 'parcel'\r\n\tnode.setField 'source', 'src/index.html'\r\n\tnode.addScript 'start', 'parcel'\r\n\tnode.addScript 'build', 'parcel build'\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport setUpElectron = (node) =>\r\n\r\n\tnode.setField 'main', 'src/main.js'\r\n\tnode.addScript 'start', 'pnpm run build && electron .'\r\n\r\n\tconsole.log \"Installing (dev) \\\"electron\\\"\"\r\n\tnode.addDevDependency 'electron'\r\n\r\n\tconsole.log \"Creating src/main.coffee\"\r\n\tbarf \"\"\"\r\n\t\timport pathLib from 'node:path'\r\n\t\timport {app, BrowserWindow} from 'electron'\r\n\r\n\t\tapp.on 'ready', () =>\r\n\t\t\twin = new BrowserWindow({\r\n\t\t\t\twidth: 800,\r\n\t\t\t\theight: 600\r\n\t\t\t\twebPreferences: {\r\n\t\t\t\t\tnodeIntegration: true\r\n\t\t\t\t\tpreload: pathLib.join(import.meta.dirname, 'preload.js')\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t# --- win.loadFile('src/index.html')\r\n\t\t\twin.loadURL(\"file://#{import.meta.dirname}/index.html\")\r\n\t\t\t\"\"\", \"./src/main.coffee\"\r\n\r\n\t# ..........................................................\r\n\r\n\tconsole.log \"Creating src/index.html\"\r\n\tbarf \"\"\"\r\n\t\t<!DOCTYPE html>\r\n\t\t<html lang=\"en\">\r\n\t\t\t<head>\r\n\t\t\t\t<meta charset=\"UTF-8\">\r\n\t\t\t\t<!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP -->\r\n\t\t\t\t<meta http-equiv=\"Content-Security-Policy\" content=\"default-src 'self'; script-src 'self'\">\r\n\t\t\t\t<title>Electron App</title>\r\n\t\t\t</head>\r\n\t\t\t<body>\r\n\t\t\t\t<h1>Electron App, using:</h1>\r\n\t\t\t\t<p span id=\"node-version\">node-version</p>\r\n\t\t\t\t<p span id=\"chrome-version\">chrome-version</p>\r\n\t\t\t\t<p span id=\"electron-version\">electron-version</p>\r\n\t\t\t\tby <p id=\"myname\">My Name Here</p>\r\n\t\t\t\t<script src=\"./renderer.js\"></script>\r\n\t\t\t</body>\r\n\t\t</html>\r\n\t\t\"\"\", \"./src/index.html\"\r\n\r\n\t# ..........................................................\r\n\r\n\tconsole.log \"Creating src/preload.coffee\"\r\n\tbarf \"\"\"\r\n\t\t# --- preload.coffee has access to window,\r\n\t\t#     document and NodeJS globals\r\n\r\n\t\twindow.addEventListener 'DOMContentLoaded', () =>\r\n\t\t\treplaceText = (selector, text) =>\r\n\t\t\t\telem = document.getElementById(selector)\r\n\t\t\t\tif (elem)\r\n\t\t\t\t\telem.innerText = text\r\n\r\n\t\t\tfor dep in ['chrome','node','electron']\r\n\t\t\t\tstr = \"\\#{dep} version \\#{process.versions[dep]}\"\r\n\t\t\t\treplaceText \"\\#{dep}-version\", str\r\n\t\t\"\"\", \"./src/preload.coffee\"\r\n\r\n\t# ..........................................................\r\n\r\n\tconsole.log \"Creating src/renderer.coffee\"\r\n\tbarf \"\"\"\r\n\t\t# --- preload.coffee has access to window and document\r\n\r\n\t\telem = document.getElementById('myname')\r\n\t\tif elem\r\n\t\t\telem.innerText = '#{author}'\r\n\t\telse\r\n\t\t\tconsole.log \"No element with id 'myname'\"\r\n\t\t\"\"\", \"./src/renderer.coffee\"\r\n\r\n\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport setUpCodeMirror = (node) =>\r\n\r\n\treturn\r\n\r\n"
  ]
}