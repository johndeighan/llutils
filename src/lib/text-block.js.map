{
  "version": 3,
  "file": "text-block.js",
  "sourceRoot": "..\\..\\",
  "sources": [
    "src\\lib\\text-block.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "# text-block.coffee\r\n\r\nimport {\r\n\tundef, defined, notdefined, getOptions,\r\n\ttoBlock, toArray, rpad, escapeStr,\r\n\tassert, croak, untabify, isString, OL, pass, centered,\r\n\t} from '@jdeighan/llutils'\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport class TextBlock\r\n\r\n\tconstructor: (hOptions={}) ->\r\n\r\n\t\t@hOptions = getOptions hOptions, {\r\n\t\t\tuntabify: true\r\n\t\t\t}\r\n\t\t@maxLen = 0\r\n\t\t@lLines = []\r\n\r\n\tgetLines: () -> return @lLines\r\n\tgetBlock: () -> return toBlock(@lLines)\r\n\r\n\t# ..........................................................\r\n\r\n\tappend: (block) ->\r\n\r\n\t\tassert isString(block), \"Not a string: #{OL(block)}\"\r\n\t\tfor str in toArray(block)\r\n\t\t\tif @hOptions.untabify\r\n\t\t\t\tstr = untabify(str)\r\n\t\t\tif (str.length > @maxLen)\r\n\t\t\t\t@maxLen = str.length\r\n\t\t\t@lLines.push str\r\n\t\treturn\r\n\r\n\t# ..........................................................\r\n\r\n\tprepend: (block) ->\r\n\r\n\t\tassert isString(block), \"Not a string: #{OL(block)}\"\r\n\t\tfor str in toArray(block).reverse()\r\n\t\t\tif (str.length > @maxLen)\r\n\t\t\t\t@maxLen = str.length\r\n\t\t\t@lLines.unshift str\r\n\t\treturn\r\n\r\n# ---------------------------------------------------------------------------\r\n\r\nexport class TextBlockList\r\n\r\n\tconstructor: (hOptions={}) ->\r\n\r\n\t\thOptions = getOptions hOptions, {\r\n\t\t\tesc: false\r\n\t\t\t}\r\n\t\t@esc = hOptions.esc   # --- escape each string?\r\n\r\n\t\t@lLabels = []\r\n\t\t@lBlocks = []\r\n\t\t@maxLen = 0\r\n\t\t@maxLabelLen = 0\r\n\r\n\t# ..........................................................\r\n\r\n\tnumBlocks: () ->\r\n\r\n\t\tassert (@lLabels.length == @lBlocks.length),\r\n\t\t\t\t\"num blocks <> num labels\"\r\n\t\treturn @lBlocks.length\r\n\r\n\t# ..........................................................\r\n\r\n\taddBlock: (label, str=undef) ->\r\n\r\n\t\tassert isString(label), \"Not a string: #{OL(label)}\"\r\n\t\tassert (label.length > 0), \"Zero length label\"\r\n\t\tif (label.length > @maxLabelLen)\r\n\t\t\t@maxLabelLen = label.length\r\n\t\t@lLabels.push label\r\n\r\n\t\tblock = new TextBlock()\r\n\t\tif defined(str)\r\n\t\t\tblock.append str\r\n\t\t\tif (block.maxLen > @maxLen)\r\n\t\t\t\t@maxLen = block.maxLen\r\n\t\t@lBlocks.push block\r\n\r\n\t\treturn\r\n\r\n\t# ..........................................................\r\n\r\n\tcurBlock: () ->\r\n\r\n\t\tassert (@numBlocks > 0), \"No blocks exist\"\r\n\t\treturn @lBlocks.at(-1)\r\n\r\n\t# ..........................................................\r\n\r\n\tappend: (str) ->\r\n\r\n\t\tblock = @curBlock()\r\n\t\tif @esc\r\n\t\t\tblock.append escapeStr(str, 'escNoNL')\r\n\t\telse\r\n\t\t\tblock.append str\r\n\t\tif (block.maxLen > @maxLen)\r\n\t\t\t@maxLen = block.maxLen\r\n\t\treturn\r\n\r\n\t# ..........................................................\r\n\r\n\tprepend: (str) ->\r\n\r\n\t\tblock = @curBlock()\r\n\t\tif @esc\r\n\t\t\tblock.prepend escapeStr(str, 'escNoNL')\r\n\t\telse\r\n\t\t\tblock.prepend str\r\n\t\tif (block.maxLen > @maxLen)\r\n\t\t\t@maxLen = block.maxLen\r\n\t\treturn\r\n\r\n\t# ..........................................................\r\n\r\n\tasString: (hOptions={}) ->\r\n\r\n\t\tlLines = @asArray(hOptions)\r\n\t\treturn toBlock(lLines)\r\n\r\n\t# ..........................................................\r\n\r\n\tasArray: (hOptions={}) ->\r\n\r\n\t\t{format, minWidth} = getOptions hOptions, {\r\n\t\t\tformat: 'dashes'    # or 'box'\r\n\t\t\tminWidth: 40\r\n\t\t\t}\r\n\r\n\t\twidth = @maxLen\r\n\t\tif (width < @maxLabelLen + 8)\r\n\t\t\twidth = @maxLabelLen + 8\r\n\t\tif (width < minWidth)\r\n\t\t\twidth = minWidth\r\n\r\n\t\tlLines = []   # --- build lines\r\n\t\tswitch format\r\n\r\n\t\t\twhen 'box'\r\n\t\t\t\tul = '┌'\r\n\t\t\t\tur = '┐'\r\n\t\t\t\tll = '└'\r\n\t\t\t\tlr = '┘'\r\n\t\t\t\tvbar = '│'\r\n\t\t\t\thbar = '─'\r\n\t\t\t\tlconn = '├'\r\n\t\t\t\trconn = '┤'\r\n\t\t\t\tfor block,i in @lBlocks\r\n\t\t\t\t\tif (i == 0)\r\n\t\t\t\t\t\tlLines.push ul + hbar + centered(@lLabels[i], width, {char: hbar}) + hbar + ur\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tlLines.push lconn + hbar + centered(@lLabels[i], width, {char: hbar}) + hbar + rconn\r\n\t\t\t\t\tfor line in block.getLines()\r\n\t\t\t\t\t\tlLines.push vbar + ' ' + rpad(line, width) + ' ' + vbar\r\n\t\t\t\tlLines.push ll + hbar.repeat(width+2) + lr\r\n\r\n\t\t\telse\r\n\t\t\t\tfor block,i in @lBlocks\r\n\t\t\t\t\tlLines.push centered(@lLabels[i], width, 'char=-')\r\n\t\t\t\t\tfor line in block.getLines()\r\n\t\t\t\t\t\tlLines.push line\r\n\t\t\t\tlLines.push '-'.repeat(width)\r\n\t\treturn lLines\r\n"
  ]
}