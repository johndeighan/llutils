{
  "version": 3,
  "file": "op-dumper.js",
  "sourceRoot": "..\\..\\",
  "sources": [
    "src\\lib\\op-dumper.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "# op-dumper.coffee\r\n\r\nimport fs from 'node:fs'\r\nimport {\r\n\tundef, defined, notdefined, isString, getOptions,\r\n\tassert, croak, range, centered, lpad, toBlock,\r\n\t} from '@jdeighan/llutils'\r\nimport {indented, undented} from '@jdeighan/llutils/indent'\r\nimport {DUMP, BOX} from '@jdeighan/llutils/dump'\r\n\r\n# --------------------------------------------------------------------------\r\n\r\nexport class OpDumper\r\n\r\n\tconstructor: (hOptions={}) ->\r\n\r\n\t\t{ignore} = getOptions hOptions, {\r\n\t\t\tignore: [37, 38, 39, 40]\r\n\t\t\t}\r\n\t\t@lIgnore = ignore\r\n\t\t@level = 0\r\n\t\t@lLines = []\r\n\r\n\t# ..........................................................\r\n\r\n\tsetStack: (stack) ->\r\n\r\n\t\t@stack = stack\r\n\t\treturn\r\n\r\n\t# ..........................................................\r\n\r\n\tincLevel: () -> @level += 1\r\n\tdecLevel: () -> @level -= 1\r\n\r\n\t# ..........................................................\r\n\r\n\tout: (str) ->\r\n\t\t@lLines.push \"  \".repeat(@level) + str\r\n\t\treturn\r\n\r\n\t# ..........................................................\r\n\r\n\toutOp: (index, op) ->\r\n\r\n\t\tif !@lIgnore.includes(op)\r\n\t\t\t@out \"OP[#{lpad(index,2)}]: #{lpad(op,2)} #{@getName(op)}\"\r\n\r\n\t# ..........................................................\r\n\r\n\toutBC: (lByteCodes) ->\r\n\r\n\t\t# --- For now, don't output anything\r\n\t\treturn\r\n\r\n\t\t@out 'OPCODES: ' \\\r\n\t\t\t+ lByteCodes \\\r\n\t\t\t\t.filter((x) => !@lIgnore.includes(x)) \\\r\n\t\t\t\t.map((x) => x.toString()) \\\r\n\t\t\t\t.join(' ');\r\n\t\treturn\r\n\r\n\t# ..........................................................\r\n\r\n\toutCode: (lLines, label) ->\r\n\r\n\t\tlLines = BOX toBlock(lLines), label, {\r\n\t\t\techo: false\r\n\t\t\tasArray: true\r\n\t\t\t}\r\n\t\tfor line in lLines\r\n\t\t\t@out line\r\n\t\treturn\r\n\r\n\t# ..........................................................\r\n\r\n\tgetBlock: () ->\r\n\r\n\t\treturn @lLines.join(\"\\n\")\r\n\r\n\t# ..........................................................\r\n\r\n\twriteTo: (filePath) ->\r\n\r\n\t\tconsole.log \"Writing opcodes to #{filePath}\"\r\n\t\tfs.writeFileSync(filePath, @getBlock())\r\n\t\treturn\r\n\r\n\t# ..........................................................\r\n\r\n\tgetName: (op) ->\r\n\r\n\t\tswitch op\r\n\t\t\twhen  0 then return 'PUSH'\r\n\t\t\twhen 35 then return 'PUSH_EMPTY_STRING'\r\n\t\t\twhen  1 then return 'PUSH_UNDEFINED'\r\n\t\t\twhen  2 then return 'PUSH_NULL'\r\n\t\t\twhen  3 then return 'PUSH_FAILED'\r\n\t\t\twhen  4 then return 'PUSH_EMPTY_ARRAY'\r\n\t\t\twhen  5 then return 'PUSH_CURR_POS'\r\n\t\t\twhen  6 then return 'POP'\r\n\t\t\twhen  7 then return 'POP_CURR_POS'\r\n\t\t\twhen  8 then return 'POP_N'\r\n\t\t\twhen  9 then return 'NIP'\r\n\t\t\twhen 10 then return 'APPEND'\r\n\t\t\twhen 11 then return 'WRAP'\r\n\t\t\twhen 12 then return 'TEXT'\r\n\t\t\twhen 36 then return 'PLUCK'\r\n\r\n\t\t\t# ---  Conditions and Loops\r\n\r\n\t\t\twhen 13 then return 'IF'\r\n\t\t\twhen 14 then return 'IF_ERROR'\r\n\t\t\twhen 15 then return 'IF_NOT_ERROR'\r\n\t\t\twhen 30 then return 'IF_LT'\r\n\t\t\twhen 31 then return 'IF_GE'\r\n\t\t\twhen 32 then return 'IF_LT_DYNAMIC'\r\n\t\t\twhen 33 then return 'IF_GE_DYNAMIC'\r\n\t\t\twhen 16 then return 'WHILE_NOT_ERROR'\r\n\r\n\t\t\t# ---  Matching\r\n\r\n\t\t\twhen 17 then return 'MATCH_ANY'\r\n\t\t\twhen 18 then return 'MATCH_STRING'\r\n\t\t\twhen 19 then return 'MATCH_STRING_IC'\r\n\t\t\twhen 20 then return 'MATCH_CHAR_CLASS'\r\n\t\t\twhen 20 then return 'MATCH_REGEXP'\r\n\t\t\twhen 21 then return 'ACCEPT_N'\r\n\t\t\twhen 22 then return 'ACCEPT_STRING'\r\n\t\t\twhen 23 then return 'FAIL'\r\n\r\n\t\t\t# ---  Calls\r\n\r\n\t\t\twhen 24 then return 'LOAD_SAVED_POS'\r\n\t\t\twhen 25 then return 'UPDATE_SAVED_POS'\r\n\t\t\twhen 26 then return 'CALL'\r\n\r\n\t\t\t# ---  Rules\r\n\r\n\t\t\twhen 27 then return 'RULE'\r\n\t\t\twhen 41 then return 'LIBRARY_RULE'\r\n\r\n\t\t\t# ---  Failure Reporting\r\n\r\n\t\t\twhen 28 then return 'SILENT_FAILS_ON'\r\n\t\t\twhen 29 then return 'SILENT_FAILS_OFF'\r\n\r\n\t\t\twhen 37 then return 'SOURCE_MAP_PUSH'\r\n\t\t\twhen 38 then return 'SOURCE_MAP_POP'\r\n\t\t\twhen 39 then return 'SOURCE_MAP_LABEL_PUSH'\r\n\t\t\twhen 40 then return 'SOURCE_MAP_LABEL_POP'\r\n\r\n\t\t\telse return '<UNKNOWN>'\r\n"
  ]
}